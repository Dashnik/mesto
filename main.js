(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=e,this._cardimage=n.link,this._cardTitle=n.name,this._cardLikes=n.likes,this._cardId=n._id,this._handleCardClick=r,this._handleTrashClick=o,this._handleLikeClick=i}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0)}},{key:"_deleteCardHandler",value:function(e){e.target.parentNode.remove()}},{key:"_likeCardHandler",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_setListeners",value:function(){var e=this;this._element.querySelector(".card__trash").addEventListener("click",this._handleTrashClick),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick(e._cardimage,e._cardTitle)})),this._element.querySelector(".card__like").addEventListener("click",(function(t){t.target.classList.toggle("card__like_active"),e._handleLikeClick(e._cardId)}))}},{key:"getElement",value:function(){this._element=this._getTemplate(),this._element.querySelector(".card").id=this._cardId;var e=this._element.querySelector(".card__image");return e.src=this._cardimage,e.alt=this._cardTitle,this._element.querySelector(".card__counter-like").textContent=this._cardLikes.length,this._element.querySelector(".card__title").textContent=this._cardTitle,this._setListeners(),this._element}}])&&e(n.prototype,r),t}(),n=document.querySelector(".overlay"),r={formSelector:".popup_edit-user-profile",formSelectorCard:".popup_cards",formProfileInputsSelector:".popup__input_type_error",formProfileInputsErrorsSelector:".popup__input-error",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",errorClass:"popup__input-error_active",inputErrorClass:"popup__input_type_error"};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t,this._formElement=document.querySelector(t),this._object=n,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._errorClass=n.errorClass,this._inputErrorClass=n.inputErrorClass}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));r.textContent=n,r.classList.add(this._object.errorClass),t.classList.add(this._object.inputErrorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector("#".concat(t.id,"-error"));n.textContent="",n.classList.remove(this._object.errorClass),t.classList.remove(this._object.inputErrorClass)}},{key:"_getErrorMessage",value:function(e){return e.validationMessage}},{key:"_checkInputValidity",value:function(e,t){if(t.validity.valid)this._hideInputError(e,t);else{var n=this._getErrorMessage(t);this._showInputError(e,t,n)}}},{key:"_hasInValidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){t?(e.classList.add(this._object.inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._object.inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._object.inputSelector)),r=e.querySelector(this._object.submitButtonSelector);n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o);var i=t._hasInValidInput(n);t._toggleButtonState(r,i)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._formElement,this._object)}},{key:"clearProfileErrors",value:function(){var e=document.querySelectorAll(r.formProfileInputsSelector),t=document.querySelector(r.submitButtonSelector),n=document.querySelectorAll(r.formProfileInputsErrorsSelector);0!==e.length&&(e.forEach((function(e){e.classList.remove(r.inputErrorClass)})),t.classList.remove(r.inactiveButtonClass),0!==n.length&&n.forEach((function(e){e.classList.remove(r.errorClass)})))}}])&&o(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._containerSelector=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._containerSelector.append(e)}}])&&c(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this.setEventListeners=this.setEventListeners.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),n.classList.add("overlay_visible"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),n.classList.remove("overlay_visible"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){e.preventDefault(),"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close")&&e.close()})),n.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&a(t.prototype,r),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function c(){return f(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"open",value:function(e,t){h(v(c.prototype),"open",this).call(this);var n=this._popupElement.querySelector(".popup__image");n.alt=t,n.src=e,this._popupElement.querySelector(".popup__caption").textContent=t}}])&&p(t.prototype,n),c}(s);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._handleFormSubmit=t,n}return t=c,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupElement.querySelectorAll(".popup__input").forEach((function(t){e[t.name]=t.value})),e.likes="",e}},{key:"renderLoading",value:function(e){this._popupElement.querySelector(".popup__submit").innerHTML=e?"Сохранение...":"Сохранить"}},{key:"setEventListeners",value:function(){var e=this;g(k(c.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit(e._getInputValues()),e.close(),e.renderLoading(!1)}))}},{key:"close",value:function(){g(k(c.prototype),"close",this).call(this)}}])&&b(t.prototype,n),c}(s);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._handleFormSubmit=t,n}return t=c,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupElement.querySelectorAll(".popup__input").forEach((function(t){e[t.name]=t.value})),e}},{key:"_deleteCard",value:function(e){}},{key:"setEventListeners",value:function(){var e=this;j(I(c.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),_deleteCard(cardID),e.close()}))}}])&&L(t.prototype,n),c}(s);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectorName=t,this._selectorDescription=n}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._selectorName.textContent,userDescription:this._selectorDescription.textContent}}},{key:"setUserInfo",value:function(e,t){var n=e.value,r=t.value;this._selectorName.textContent=n,this._selectorDescription.textContent=r}}])&&T(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"getProfileInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(e){return e.json()})).then((function(e){return e}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(e){return e.json()})).then((function(e){return e}))}},{key:"changeProfile",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e})).catch((function(e){alert(e)}))}},{key:"postCardOnTheServer",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e})).catch((function(e){alert(e)}))}},{key:"changeAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e})).catch((function(e){alert(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/").concat(id),{method:"DELETE",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e})).catch((function(e){alert(e)}))}},{key:"putLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e})).catch((function(e){alert(e)}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Server error")})).then((function(e){return e})).catch((function(e){alert(e)}))}}])&&D(t.prototype,n),e}(),U=document.querySelector(".profile__name-edit"),B=document.querySelector(".profile__vector"),A=document.querySelector(".elements"),N=document.querySelector(".profile__name"),V=document.querySelector(".profile__description"),H=document.querySelector(".popup__item_profile_name"),J=document.querySelector(".popup__item_profile_job"),M=document.querySelector(".popup_cards__submit"),F=document.querySelector(".profile__image"),z=document.querySelector(".profile__photo_container"),G=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"2be0f169-5c86-4181-b303-3b009feba466","Content-Type":"application/json"}}),K=new C(".popup_type_editing_photo_profile",(function(e){G.changeAvatar(e),F.src=e.avatar}));K.setEventListeners(),z.addEventListener("click",(function(){K.open()}));var Q=new q(".popup_type_removing_card",(function(e){e.remove()}));function W(e){e.target.parentNode,Q.open()}Q.setEventListeners(),G.getProfileInfo().then((function(e){F.src=e.avatar,N.textContent=e.name,V.textContent=e.about}));var X=new R(N,V),Y=new C(".popup_edit-user-profile",(function(){var e={name:H.value,about:J.value};G.changeProfile(e),X.setUserInfo(H,J),Y.close()}));U.addEventListener("click",(function(){Y.open(),ee.clearProfileErrors();var e=X.getUserInfo();H.value=e.userName,J.value=e.userDescription})),Y.setEventListeners();var Z=new C(".popup_cards",(function(e){var t=$(e);G.postCardOnTheServer(e),A.prepend(t),M.classList.add(r.inactiveButtonClass)}));function $(e){return new t(".card-template",e,ne,W,re).getElement()}B.addEventListener("click",(function(){Z.open(),M.classList.add(r.inactiveButtonClass)})),Z.setEventListeners();var ee=new i(r.formSelector,r);ee.enableValidation(),new i(r.formSelectorCard,r).enableValidation();var te=new _(".popup_type_image");function ne(e,t){te.open(e,t)}function re(e){G.getInitialCards().then((function(t){t.forEach((function(t){e===t._id&&console.log("It works.Card likes is "+t.likes.length)}))}))}te.setEventListeners(),G.getInitialCards().then((function(e){var n=new u({items:e,renderer:function(e){if("2911d40eec43f0326fe3701b"===e.owner._id){var r=$(e);n.addItem(r)}else{var o=function(e){return new t(".card-template-without-Trash-Icon",e,ne,W,re).getElement()}(e);n.addItem(o)}}},A);n.renderItems()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJuYW1lcyI6WyJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiY2FyZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX3NlbGVjdG9yIiwiX2NhcmRpbWFnZSIsImxpbmsiLCJfY2FyZFRpdGxlIiwibmFtZSIsIl9jYXJkTGlrZXMiLCJsaWtlcyIsIl9jYXJkSWQiLCJfaWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZVRyYXNoQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2ZW50IiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInJlbW92ZSIsImV2dCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9lbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9nZXRUZW1wbGF0ZSIsImlkIiwiY2FyZEltYWdlRWxlbWVudCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3NldExpc3RlbmVycyIsIm92ZXJsYXkiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yQ2FyZCIsImZvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJGb3JtVmFsaWRhdG9yIiwib2JqZWN0IiwiX2Zvcm1TZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsIl9vYmplY3QiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfZ2V0RXJyb3JNZXNzYWdlIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJpbnZhbGlkIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0luVmFsaWRJbnB1dCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBJbnB1dCIsInBvcHVwU3VibWl0IiwicG9wdXBJbnB1dEVycm9yIiwiaXRlbSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJlbGVtZW50IiwiYXBwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VMaW5rIiwiaW1hZ2VUaXRsZSIsInBvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsImlzTG9hZGluZyIsImlubmVySFRNTCIsInJlbmRlckxvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhEZWxldGUiLCJjYXJkSUQiLCJfZGVsZXRlQ2FyZCIsIlVzZXJJbmZvIiwidXNlck5hbWVFbGVtZW50IiwidXNlckRlc2NyaXB0aW9uRWxlbWVudCIsIl9zZWxlY3Rvck5hbWUiLCJfc2VsZWN0b3JEZXNjcmlwdGlvbiIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwibmFtZUlucHV0VmFsdWUiLCJqb2JJbnB1dFZhbHVlIiwiQXBpIiwiY29uZmlnIiwiYmFzZVVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0IiwicHJvZmlsZUluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiUHJvbWlzZSIsInJlamVjdCIsImRhdGEiLCJlcnIiLCJhbGVydCIsIm5ld0NhcmQiLCJjYXJkSWQiLCJwb3B1cE9wZW5Qcm9maWxlQnV0dG9uIiwicG9wdXBDYXJkc09wZW5CdXR0b24iLCJjYXJkc0NvbnRhaW5lciIsInRleHRQcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlSm9iSW5wdXQiLCJhZGRpbmdJbmFjdGl2ZUNsYXNzRm9yU3VibWl0IiwicHJvZmlsZUltYWdlIiwicHJvZmlsZVBob3RvQ29udGFpbmVyIiwiYXBpUHJha3Rpa3VtIiwiYXV0aG9yaXphdGlvbiIsInBvcHVwV2l0aEVkaXRQaG90byIsIm5ld0xpbmsiLCJjaGFuZ2VBdmF0YXIiLCJhdmF0YXIiLCJvcGVuIiwidHJhc2hQb3B1cCIsImdldFByb2ZpbGVJbmZvIiwicHJvZmlsZSIsImFib3V0IiwidXNlckluZm8iLCJwcm9maWxlUG9wVXAiLCJjaGFuZ2VQcm9maWxlIiwic2V0VXNlckluZm8iLCJlZGl0VXNlclByb2ZpbGVWYWxpZGF0b3IiLCJjbGVhclByb2ZpbGVFcnJvcnMiLCJwcm9maWxlRGF0YUZyb21QYWdlIiwiZ2V0VXNlckluZm8iLCJhZGRDYXJkUG9wdXAiLCJvYmplY3ROZXdDYXJkcyIsIm5ld0VsZW1lbnQiLCJjcmVhdGVDYXJkIiwicG9zdENhcmRPblRoZVNlcnZlciIsInByZXBlbmQiLCJnZXRFbGVtZW50IiwiZW5hYmxlVmFsaWRhdGlvbiIsImltYWdlUG9wdXAiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsImNvbnNvbGUiLCJsb2ciLCJjYXJkc0xpc3QiLCJvd25lciIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkV2l0aG91dFRyYXNoSWNvbiIsInJlbmRlckl0ZW1zIl0sIm1hcHBpbmdzIjoieUxBQU8sSUFBTUEsRUFBYixXQUNFLFdBQVlDLEVBQWNDLEVBQU1DLEVBQWlCQyxFQUFpQkMsSSw0RkFBaUIsU0FDakZDLEtBQUtDLFVBQVlOLEVBQ2pCSyxLQUFLRSxXQUFhTixFQUFLTyxLQUN2QkgsS0FBS0ksV0FBYVIsRUFBS1MsS0FDdkJMLEtBQUtNLFdBQWFWLEVBQUtXLE1BQ3ZC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d0wsR0FBV3JCLEtBQUtySyxFQUFLRSxHQUd2QixTQUFTTixHQUFnQndILEdBR3hCMkMsRUFBYTRCLGtCQUFrQnZELE1BQUssU0FBQ3dELEdBQ25DQSxFQUFNcEgsU0FBUSxTQUFDL0UsR0FDVDJILElBQVczSCxFQUFLYSxLQUNuQnVMLFFBQVFDLElBQUksMEJBQTJCck0sRUFBS1csTUFBTXlCLGNBWnhENkosR0FBVzFGLG9CQXdCWCtELEVBQWE0QixrQkFBa0J2RCxNQUFLLFNBQUN3RCxHQUduQyxJQUFNRyxFQUFZLElBQUk3RyxFQUNwQixDQUNFRSxNQUFPd0csRUFDUHZHLFNBQVUsU0FBQzVGLEdBQ1QsR0FsRUssNkJBa0VEQSxFQUFLdU0sTUFBTTFMLElBQWMsQ0FDM0IsSUFBTW1GLEVBQVU0RixFQUFXNUwsR0FFM0JzTSxFQUFVRSxRQUFReEcsT0FFZixDQUNILElBQU1BLEVBekRoQixTQUFvQ2hHLEdBVWxDLE9BVG9CLElBQUlGLEVBN0hXLG9DQStIakNFLEVBQ0FDLEdBQ0FDLEVBQ0FDLElBRzBCNEwsYUFnREpVLENBQTJCek0sR0FFM0NzTSxFQUFVRSxRQUFReEcsTUFJeEI4RCxHQUdGd0MsRUFBVUksa0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihjYXJkU2VsZWN0b3IsIGNhcmQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlVHJhc2hDbGljayxoYW5kbGVMaWtlQ2xpY2spIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2FyZGltYWdlID0gY2FyZC5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gY2FyZC5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gY2FyZC5saWtlcztcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmQuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlQ2FyZEhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGNvbnN0IGNhcmRDaGlsZCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgY2FyZENoaWxkLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2xpa2VDYXJkSGFuZGxlcihldnQpIHtcclxuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX3NldExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVUcmFzaENsaWNrKTtcclxuICAgICAvLy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fZGVsZXRlQ2FyZEhhbmRsZXIpOyAgXHJcbiAgICBcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkaW1hZ2UsIHRoaXMuX2NhcmRUaXRsZSk7XHJcbiAgICAgIH0pOyAgICBcclxuXHJcbiAgICAvLyB0aGlzLl9lbGVtZW50XHJcbiAgICAvLyAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIilcclxuICAgIC8vICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9saWtlQ2FyZEhhbmRsZXIpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5fY2FyZElkKTtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgY291bnRlckxpa2VzRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAvLyAgIFwiLmNhcmRfX2NvdW50ZXItbGlrZVwiXHJcbiAgICAgICAgLy8gKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhjb3VudGVyTGlrZXNFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAvLyBjb25zdCBjYXJkSUQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9pZFwiKTtcclxuICAgIC8vIGNhcmRJRC50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmRJZDtcclxuICAgIGNvbnN0IGNhcmRJRCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xyXG4gICAgY2FyZElELmlkID0gdGhpcy5fY2FyZElkO1xyXG4gXHJcblxyXG4gICAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fY2FyZGltYWdlO1xyXG4gICAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9jYXJkVGl0bGU7XHJcblxyXG4gICAgY29uc3QgY291bnRlckxpa2VzRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fY291bnRlci1saWtlXCJcclxuICAgICk7XHJcbiAgICBjb3VudGVyTGlrZXNFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fY2FyZExpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkVGl0bGU7XHJcblxyXG4gXHJcbiAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIC8vIGZvcm1TZWxlY3RvcjogXCIucG9wdXBcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX2VkaXQtdXNlci1wcm9maWxlXCIsXHJcbiAgZm9ybVNlbGVjdG9yQ2FyZDogXCIucG9wdXBfY2FyZHNcIixcclxuXHJcbiAgZm9ybVByb2ZpbGVJbnB1dHNTZWxlY3RvciA6IFwiLnBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZm9ybVByb2ZpbGVJbnB1dHNFcnJvcnNTZWxlY3RvcjpcIi5wb3B1cF9faW5wdXQtZXJyb3JcIixcclxuICBcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdF9pbmFjdGl2ZVwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLCBcclxufTsiLCJpbXBvcnQge3ZhbGlkYXRpb25Db25maWd9IGZyb20gJy4uL3NjcmlwdHMvY29uc3RhbnRzLmpzJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCBvYmplY3QpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fb2JqZWN0ID0gb2JqZWN0O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9iamVjdC5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBvYmplY3Quc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gb2JqZWN0LmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gb2JqZWN0LmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvYmplY3QuaW5wdXRFcnJvckNsYXNzO1xyXG4gIH1cclxuICAvLyDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LTQvtCx0LDQstC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcclxuICBfc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb2JqZWN0LmVycm9yQ2xhc3MpO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29iamVjdC5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy8g0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINGD0LTQsNC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcclxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuZXJyb3JDbGFzcyk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb2JqZWN0LmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0RXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIC8vINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQv9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y9cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGlzSW5wdXROb3RWYWxpZCA9ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcblxyXG4gICAgaWYgKGlzSW5wdXROb3RWYWxpZCkge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9nZXRFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KTtcclxuICAgICAgLy8g0JXRgdC70Lgg0L/QvtC70LUg0L3QtSDQv9GA0L7RhdC+0LTQuNGCINCy0LDQu9C40LTQsNGG0LjRjiwg0L/QvtC60LDQttC10Lwg0L7RiNC40LHQutGDXHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDQldGB0LvQuCDQv9GA0L7RhdC+0LTQuNGCLCDRgdC60YDQvtC10LxcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW5WYWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgY29uc3QgdmFsaWQgPSBpbnB1dExpc3Quc29tZShcclxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICAgIHJldHVybiB2YWxpZDtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50LCBpbnZhbGlkKSB7XHJcbiAgICBpZiAoaW52YWxpZCkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb2JqZWN0LmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cclxuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcblxyXG4gICAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50KSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX29iamVjdC5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9vYmplY3Quc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgY29uc3QgaW52YWxpZCA9IHRoaXMuX2hhc0luVmFsaWRJbnB1dChpbnB1dExpc3QpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGJ1dHRvbkVsZW1lbnQsIGludmFsaWQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHRoaXMuX2Zvcm1FbGVtZW50LCB0aGlzLl9vYmplY3QpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXJQcm9maWxlRXJyb3JzKCkge1xyXG4gICAgY29uc3QgcG9wdXBJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5mb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yKTtcclxuICAgIGNvbnN0IHBvcHVwU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih2YWxpZGF0aW9uQ29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIGNvbnN0IHBvcHVwSW5wdXRFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvbkNvbmZpZy5mb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yKTtcclxuICAgIGlmIChwb3B1cElucHV0Lmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICBwb3B1cElucHV0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUodmFsaWRhdGlvbkNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICB9KTtcclxuICAgICAgcG9wdXBTdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBpZiAocG9wdXBJbnB1dEVycm9yLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIHBvcHVwSW5wdXRFcnJvci5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUodmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoY2FyZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG5pbXBvcnQge292ZXJsYXl9IGZyb20gJy4uL3NjcmlwdHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycyA9IHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXlfdmlzaWJsZVwiKTtcclxuICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXlfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAvL2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9IFxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT57XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpKSB7XHJcbiAgIFxyXG4gICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgfSAgXHJcbiAgICB9ICk7XHJcbiAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHsgXHJcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHsgXHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9IFxyXG4gICAgfSk7IFxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgb3BlbihpbWFnZUxpbmssIGltYWdlVGl0bGUpIHtcclxuICAgIHN1cGVyLm9wZW4oKTsgLy/QstGL0LfRi9Cy0LDQtdC8INGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQvNC10YLQvtC0XHJcblxyXG4gICAgY29uc3QgcG9wdXBJbWFnZUJpZ0ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9faW1hZ2VcIlxyXG4gICAgKTtcclxuXHJcbiAgICAvL9C00L7Qv9C+0LvQvdC40Lwgb3BlbiDQvdC+0LLQvtC5INGE0YPQvdC60YbQuNC+0L3QsNC70YzQvdC+0YHRgtGM0Y5cclxuICAgIHBvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQuYWx0ID0gaW1hZ2VUaXRsZTtcclxuICAgIHBvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQuc3JjID0gaW1hZ2VMaW5rO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fY2FwdGlvblwiXHJcbiAgICApLnRleHRDb250ZW50ID0gaW1hZ2VUaXRsZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGVtcHR5TGlrZSA9ICcnO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGNvbnN0IHZhbHVlc0Zyb21JbnB1dHMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIucG9wdXBfX2lucHV0XCJcclxuICAgICk7XHJcbiAgICB2YWx1ZXNGcm9tSW5wdXRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2VsZW1lbnQubmFtZV0gPSBlbGVtZW50LnZhbHVlOyAgICAgIFxyXG4gICAgfSk7IFxyXG4gICAgaW5wdXRWYWx1ZXMubGlrZXMgPSBlbXB0eUxpa2U7XHJcbiAgIFxyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuICBcclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZyl7XHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQnKTtcclxuICAgICAgaWYgKGlzTG9hZGluZyl7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmlubmVySFRNTCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmlubmVySFRNTCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnO1xyXG4gICAgICB9ICAgXHJcbiAgICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pXHJcbiAgIFxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgIC8vdGhpcy5fcG9wdXBFbGVtZW50LnJlc2V0KCk7ICAgXHJcbiAgfVxyXG5cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG4gIFxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICBjb25zdCB2YWx1ZXNGcm9tSW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgIFwiLnBvcHVwX19pbnB1dFwiXHJcbiAgICApO1xyXG4gICAgdmFsdWVzRnJvbUlucHV0cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tlbGVtZW50Lm5hbWVdID0gZWxlbWVudC52YWx1ZTtcclxuICAgIH0pOyBcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIF9kZWxldGVDYXJkKGNhcmRJRCl7XHJcbiAgICAvL9C/0L7QudC80Lgg0LrQsNC60YPRjiDQutCw0YDRgtC+0YfQutGDINC90YPQttC90L4g0YPQtNCw0LvQuNGC0YxcclxuICAgIFxyXG4gICAgLy/Rg9C00LDQu9C4INC10ZFcclxuICB9XHJcbiAgXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgX2RlbGV0ZUNhcmQoY2FyZElEKTtcclxuICAgICAvLyB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX3JlbW92ZUNhcmQpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTsgIFxyXG4gIH1cclxuICBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZUVsZW1lbnQsIHVzZXJEZXNjcmlwdGlvbkVsZW1lbnQpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yTmFtZSA9IHVzZXJOYW1lRWxlbWVudDtcclxuICAgIHRoaXMuX3NlbGVjdG9yRGVzY3JpcHRpb24gPSB1c2VyRGVzY3JpcHRpb25FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCBuYW1lID0gdGhpcy5fc2VsZWN0b3JOYW1lLnRleHRDb250ZW50OyBcclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5fc2VsZWN0b3JEZXNjcmlwdGlvbi50ZXh0Q29udGVudDsgXHJcbiAgICAgIFxyXG4gICAgIGNvbnN0IHVzZXJEYXRhID0ge1xyXG4gICAgICB1c2VyTmFtZSA6IG5hbWUsXHJcbiAgICAgIHVzZXJEZXNjcmlwdGlvbiA6IGRlc2NyaXB0aW9uLFxyXG4gICAgfVxyXG4gICAgXHJcbiAgcmV0dXJuIHVzZXJEYXRhO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbikge1xyXG4gICAgY29uc3QgbmFtZUlucHV0VmFsdWUgPSB1c2VyTmFtZS52YWx1ZTsgXHJcbiAgICBjb25zdCBqb2JJbnB1dFZhbHVlID0gdXNlckRlc2NyaXB0aW9uLnZhbHVlOyBcclxuIFxyXG4gICAgdGhpcy5fc2VsZWN0b3JOYW1lLnRleHRDb250ZW50ID0gbmFtZUlucHV0VmFsdWU7IFxyXG4gICAgdGhpcy5fc2VsZWN0b3JEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGpvYklucHV0VmFsdWU7IFxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgLy/RgtC10LvQviDQutC+0L3RgdGC0YDRg9C60YLQvtGA0LBcclxuICAgIHRoaXMuYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9maWxlSW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcclxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlUHJvZmlsZShwcm9maWxlSW5mbykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHByb2ZpbGVJbmZvKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAoIXJlc3VsdC5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiU2VydmVyIGVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBhbGVydChlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHBvc3RDYXJkT25UaGVTZXJ2ZXIobmV3Q2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3Q2FyZCksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlNlcnZlciBlcnJvclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VBdmF0YXIobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShsaW5rKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAoIXJlc3VsdC5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFwiU2VydmVyIGVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBhbGVydChlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmRJRCksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlNlcnZlciBlcnJvclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdXRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgLy8gYm9keTogSlNPTi5zdHJpbmdpZnkobGlrZSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlNlcnZlciBlcnJvclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgLy8gYm9keTogSlNPTi5zdHJpbmdpZnkobGlrZSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIlNlcnZlciBlcnJvclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuLi9wYWdlcy9zdHlsZS5jc3MnO1xyXG5pbXBvcnQge0NhcmR9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCB7Rm9ybVZhbGlkYXRvcn0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhEZWxldGUgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbi8vaW1wb3J0IHtpbml0aWFsQ2FyZHN9IGZyb20gJy4vRGVmYXVsdHMtY2FyZHMuanMnO1xyXG5pbXBvcnQge3ZhbGlkYXRpb25Db25maWd9IGZyb20gJy4vY29uc3RhbnRzLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcblxyXG5jb25zdCBwb3B1cE9wZW5Qcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lLWVkaXRcIik7XHJcbi8vY29uc3QgcG9wdXBDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfY2FyZHNcIik7XHJcbmNvbnN0IHBvcHVwQ2FyZHNPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX192ZWN0b3JcIik7XHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcclxuY29uc3QgdGV4dFByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBcIi5jYXJkLXRlbXBsYXRlXCI7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZVdpdGhvdXRUcmFzaEljb24gPSAnLmNhcmQtdGVtcGxhdGUtd2l0aG91dC1UcmFzaC1JY29uJztcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gJy5wb3B1cF9lZGl0LXVzZXItcHJvZmlsZSc7XHJcbi8vY29uc3QgcG9wdXBFZGl0UHJvZmlsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZWRpdC11c2VyLXByb2ZpbGUnKTtcclxuY29uc3QgcG9wdXBDYXJkc1NlbGVjdG9yID0gXCIucG9wdXBfY2FyZHNcIjtcclxuLy8gY29uc3QgcG9wdXBJbWFnZVNlbGVjdG9yID0gXCIucG9wdXBfaW1hZ2VcIjtcclxuY29uc3QgcG9wdXBJbWFnZVNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9pbWFnZVwiO1xyXG4vLyBjb25zdCBwb3B1cFRyYXNoU2VsZWN0b3IgPSBcIi5wb3B1cF9yZW1vdmluZ19jYXJkXCI7XHJcbmNvbnN0IHBvcHVwVHJhc2hTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfcmVtb3ZpbmdfY2FyZFwiO1xyXG4vLyAgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IgPSBcIi5wb3B1cF9lZGl0aW5nX3Bob3RvX3Byb2ZpbGVcIjtcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2VkaXRpbmdfcGhvdG9fcHJvZmlsZVwiXHJcblxyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faXRlbV9wcm9maWxlX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVKb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2l0ZW1fcHJvZmlsZV9qb2JcIik7XHJcbmNvbnN0IGFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfY2FyZHNfX3N1Ym1pdCcpO1xyXG5cclxuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuY29uc3QgcHJvZmlsZVBob3RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waG90b19jb250YWluZXJcIik7XHJcblxyXG5cclxuIGNvbnN0IGFwaVByYWt0aWt1bSA9IG5ldyBBcGkoe1xyXG4gICBiYXNlVXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTdcIixcclxuICAgaGVhZGVyczoge1xyXG4gICAgIGF1dGhvcml6YXRpb246IFwiMmJlMGYxNjktNWM4Ni00MTgxLWIzMDMtM2IwMDlmZWJhNDY2XCIsXHJcbiAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgIH0sXHJcbiB9KTtcclxuXHJcbiBjb25zdCBwb3B1cFdpdGhFZGl0UGhvdG8gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRQcm9maWxlUGhvdG9TZWxlY3RvcixoYW5kbGVFZGl0UGhvdG9Qcm9maWxlU3VibWl0KTtcclxuXHJcbiBwb3B1cFdpdGhFZGl0UGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgcHJvZmlsZVBob3RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICBwb3B1cFdpdGhFZGl0UGhvdG8ub3BlbigpO1xyXG4gfSk7XHJcblxyXG5cclxuIGZ1bmN0aW9uIGhhbmRsZVJlbW92aW5nRm9ybVN1Ym1pdChjYXJkSUQpe1xyXG4gIGNhcmRJRC5yZW1vdmUoKTtcclxufVxyXG5cclxuY29uc3QgdHJhc2hQb3B1cCA9IG5ldyBQb3B1cFdpdGhEZWxldGUocG9wdXBUcmFzaFNlbGVjdG9yLGhhbmRsZVJlbW92aW5nRm9ybVN1Ym1pdCk7XHJcblxyXG50cmFzaFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUcmFzaENsaWNrKGV2ZW50KXtcclxuICBjb25zdCBjYXJkQ2hpbGQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcclxuLy8gY29uc29sZS5sb2coY2FyZENoaWxkKTtcclxuICB0cmFzaFBvcHVwLm9wZW4oKTsgIFxyXG59XHJcblxyXG5hcGlQcmFrdGlrdW0uZ2V0UHJvZmlsZUluZm8oKS50aGVuKChwcm9maWxlKSA9PiB7XHJcbiAgIHByb2ZpbGVJbWFnZS5zcmMgPSBwcm9maWxlLmF2YXRhcjtcclxuICAgdGV4dFByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZS5uYW1lO1xyXG4gICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9maWxlLmFib3V0O1xyXG4gfSk7XHJcbiBcclxuIGZ1bmN0aW9uIGhhbmRsZUVkaXRQaG90b1Byb2ZpbGVTdWJtaXQobmV3TGluaykge1xyXG4gIGFwaVByYWt0aWt1bS5jaGFuZ2VBdmF0YXIobmV3TGluayk7XHJcbiAgIHByb2ZpbGVJbWFnZS5zcmMgPSBuZXdMaW5rLmF2YXRhcjtcclxuIH1cclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCgpIHtcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IHtcclxuICAgIG5hbWU6IHByb2ZpbGVOYW1lSW5wdXQudmFsdWUsXHJcbiAgICBhYm91dDogcHJvZmlsZUpvYklucHV0LnZhbHVlLFxyXG4gIH1cclxuIFxyXG4gIGFwaVByYWt0aWt1bS5jaGFuZ2VQcm9maWxlKHByb2ZpbGVJbmZvKTtcclxuXHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZU5hbWVJbnB1dCwgcHJvZmlsZUpvYklucHV0KTtcclxuICBwcm9maWxlUG9wVXAuY2xvc2UoKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXQob2JqZWN0TmV3Q2FyZHMpIHtcclxuICBjb25zdCBuZXdFbGVtZW50ID0gY3JlYXRlQ2FyZChvYmplY3ROZXdDYXJkcyk7XHJcblxyXG4gIGFwaVByYWt0aWt1bS5wb3N0Q2FyZE9uVGhlU2VydmVyKG9iamVjdE5ld0NhcmRzKTtcclxuIFxyXG4gIGNhcmRzQ29udGFpbmVyLnByZXBlbmQobmV3RWxlbWVudCk7XHJcbiAgYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgKTtcclxufVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odGV4dFByb2ZpbGVOYW1lLHByb2ZpbGVEZXNjcmlwdGlvbik7IFxyXG5cclxuY29uc3QgcHJvZmlsZVBvcFVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuXHJcbnBvcHVwT3BlblByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBcclxuICBwcm9maWxlUG9wVXAub3BlbigpO1xyXG4gIGVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvci5jbGVhclByb2ZpbGVFcnJvcnMoKTtcclxuICBjb25zdCBwcm9maWxlRGF0YUZyb21QYWdlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhRnJvbVBhZ2UudXNlck5hbWU7IFxyXG4gIHByb2ZpbGVKb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhRnJvbVBhZ2UudXNlckRlc2NyaXB0aW9uOyBcclxuICBcclxufSk7XHJcbnByb2ZpbGVQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBDYXJkc1NlbGVjdG9yLGhhbmRsZUZvcm1TdWJtaXQpOyAgXHJcbnBvcHVwQ2FyZHNPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7IFxyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdC5jbGFzc0xpc3QuYWRkKHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbn0pO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IG15SUQgPSBcIjI5MTFkNDBlZWM0M2YwMzI2ZmUzNzAxYlwiO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAgICBjYXJkVGVtcGxhdGUsXHJcbiAgICAgIGNhcmQsXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgICAgaGFuZGxlVHJhc2hDbGljayxcclxuICAgICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgICApO1xyXG4gIFxyXG4gICAgY29uc3QgZWxlbWVudCA9IGNhcmRFbGVtZW50LmdldEVsZW1lbnQoKTtcclxuICAgIHJldHVybiBlbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkV2l0aG91dFRyYXNoSWNvbihjYXJkKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmRUZW1wbGF0ZVdpdGhvdXRUcmFzaEljb24sXHJcbiAgICBjYXJkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlVHJhc2hDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICk7XHJcblxyXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkRWxlbWVudC5nZXRFbGVtZW50KCk7XHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn1cclxuXHJcbmNvbnN0IGVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvckNhcmQsIHZhbGlkYXRpb25Db25maWcpO1xyXG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSAgbmV3IFBvcHVwV2l0aEltYWdlIChwb3B1cEltYWdlU2VsZWN0b3IpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobGluayxuYW1lKXtcclxuICBpbWFnZVBvcHVwLm9wZW4obGluayxuYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUNsaWNrKGNhcmRJRCl7XHJcbiAgLy9hcGlQcmFrdGlrdW0ucHV0TGlrZShjYXJkSUQpO1xyXG4vLyAgYXBpUHJha3Rpa3VtLmRlbGV0ZUxpa2UoY2FyZElEKTtcclxuIGFwaVByYWt0aWt1bS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChjYXJkcykgPT4ge1xyXG4gICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgaWYgKGNhcmRJRCA9PT0gY2FyZC5faWQpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0l0IHdvcmtzLkNhcmQgbGlrZXMgaXMgJysgY2FyZC5saWtlcy5sZW5ndGgpOyBcclxuICAgICAgLy8gY29uc29sZS5sb2coY2FyZCk7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKGNhcmQubGlrZXMpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhjYXJkLmxpa2VzLmxlbmd0aCk7XHJcbiAgICBcclxuXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRlc3QpO1xyXG4gIH1cclxuICAgIH0pXHJcbiB9KVxyXG59XHJcblxyXG5hcGlQcmFrdGlrdW0uZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoY2FyZHMpID0+IHtcclxuIC8vIGNvbnNvbGUubG9nKGNhcmRzKTtcclxuXHJcbiAgY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICAgICAgaWYgKGNhcmQub3duZXIuX2lkID09PSBteUlEKSB7XHJcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkKTtcclxuXHJcbiAgICAgICAgICBjYXJkc0xpc3QuYWRkSXRlbShlbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZFdpdGhvdXRUcmFzaEljb24oY2FyZCk7XHJcblxyXG4gICAgICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNhcmRzQ29udGFpbmVyXHJcbiAgKTtcclxuXHJcbiAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIGZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhsaW5rLG5hbWUpe1xyXG4vLyAgIGltYWdlUG9wdXAub3BlbihsaW5rLG5hbWUpO1xyXG4vLyB9XHJcblxyXG5cclxuXHJcbi8vIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuLy8gICBpdGVtczppbml0aWFsQ2FyZHMsXHJcbi8vICAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbi8vICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkKVxyXG5cclxuLy8gICAgIGNhcmRzTGlzdC5hZGRJdGVtKGVsZW1lbnQpO1xyXG4vLyAgIH0sXHJcbi8vICB9LGNhcmRzQ29udGFpbmVyKTtcclxuXHJcbi8vIGNhcmRzTGlzdC5yZW5kZXJJdGVtcygpOyJdLCJzb3VyY2VSb290IjoiIn0=
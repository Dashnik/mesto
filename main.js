(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=e,this._cardimage=n.link,this._cardTitle=n.name,this._cardLikes=n.likes,this._cardId=n._id,this._ownerId=n.owner._id,this._handleCardClick=r,this._handleTrashClick=o,this._apiPraktikum=i}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0)}},{key:"_deleteCardHandler",value:function(e){e.target.parentNode.remove()}},{key:"_likeCardHandler",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_setListeners",value:function(){var e=this;this._element.querySelector(".card__trash").addEventListener("click",(function(t){var n=t.target.parentNode;e._handleTrashClick(n)})),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick(e._cardimage,e._cardTitle)})),this._element.querySelector(".card__like").addEventListener("click",(function(t){t.target.classList.toggle("card__like_active");var n=t.target.parentNode,r=n.querySelector(".card__like_active"),o=n.querySelector(".card__counter-like");e._handleCountLikes(e._cardId,o,r)}))}},{key:"_handleCountLikes",value:function(e,t,n){null==n?this._apiPraktikum.deleteLike(e).then((function(e){t.textContent=e.likes.length})):this._apiPraktikum.putLike(e).then((function(e){t.textContent=e.likes.length}))}},{key:"getElement",value:function(){var e=this;this._element=this._getTemplate(),this._element.querySelector(".card").id=this._cardId;var t=this._element.querySelector(".card__image"),n=this._element.querySelector(".card__counter-like"),r=this._element.querySelector(".card__trash");return t.src=this._cardimage,t.alt=this._cardTitle,n.textContent=this._cardLikes.length,this._element.querySelector(".card__title").textContent=this._cardTitle,this._apiPraktikum.getProfileInfo().then((function(t){e._ownerId!==t._id&&(r.src="",r.alt="")})),this._setListeners(),this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=document.querySelector(t),this._object=n,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._errorClass=n.errorClass,this._inputErrorClass=n.inputErrorClass,this._formProfileInputsSelector=n.formProfileInputsSelector,this._formProfileInputsErrorsSelector=n.formProfileInputsErrorsSelector}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));r.textContent=n,r.classList.add(this._object.errorClass),t.classList.add(this._object.inputErrorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector("#".concat(t.id,"-error"));n.textContent="",n.classList.remove(this._object.errorClass),t.classList.remove(this._object.inputErrorClass)}},{key:"_getErrorMessage",value:function(e){return e.validationMessage}},{key:"_checkInputValidity",value:function(e,t){if(t.validity.valid)this._hideInputError(e,t);else{var n=this._getErrorMessage(t);this._showInputError(e,t,n)}}},{key:"_hasInValidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){t?(e.classList.add(this._object.inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._object.inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._object.inputSelector)),r=e.querySelector(this._object.submitButtonSelector);n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o);var i=t._hasInValidInput(n);t._toggleButtonState(r,i)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._formElement,this._object)}},{key:"clearProfileErrors",value:function(){var e=this,t=document.querySelectorAll(this._formProfileInputsSelector),n=document.querySelector(this._submitButtonSelector),r=document.querySelectorAll(this._formProfileInputsErrorsSelector);0!==t.length&&(t.forEach((function(t){t.classList.remove(e._inputErrorClass)})),n.classList.remove(this._inactiveButtonClass),0!==r.length&&r.forEach((function(t){t.classList.remove(e._errorClass)})))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerSelector=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e,t){t?this._containerSelector.append(e):this._containerSelector.prepend(e)}}])&&o(t.prototype,n),e}(),a={formSelector:".popup_type_edit-user-profile",formSelectorCard:".popup_type_new-cards",formProfileInputsSelector:".popup__input_type_error",formProfileInputsErrorsSelector:".popup__input-error",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",errorClass:"popup__input-error_active",inputErrorClass:"popup__input_type_error"},c=".overlay",u=document.querySelector(".profile__name-edit"),s=document.querySelector(".profile__vector"),l=document.querySelector(".elements"),f=document.querySelector(".profile__name"),p=document.querySelector(".profile__description"),h=document.querySelector(".popup__item_profile_name"),d=document.querySelector(".popup__item_profile_job"),y=document.querySelector(".popup_cards__submit"),_=document.querySelector(".profile__image"),v=document.querySelector(".profile__photo_container");function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._overlay=document.querySelector(n)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._overlay.classList.add("overlay_visible"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this._overlay.classList.remove("overlay_visible"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){e.preventDefault(),"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close")&&e.close()})),this._overlay.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}},{key:"renderLoading",value:function(e){this._popupElement.querySelector(".popup__submit").innerHTML=e?"Сохранение...":"Сохранить"}}])&&m(t.prototype,n),e}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t))._popupImageBigImageElement=n._popupElement.querySelector(".popup__image"),n._popupCaptionImageBigImageElement=n._popupElement.querySelector(".popup__caption"),n}return t=a,(n=[{key:"open",value:function(e,t){S(C(a.prototype),"open",this).call(this),this._popupImageBigImageElement.alt=t,this._popupImageBigImageElement.src=e,this._popupCaptionImageBigImageElement.textContent=t}}])&&k(t.prototype,n),a}(b);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._handleFormSubmit=n,r}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupElement.querySelectorAll(".popup__input").forEach((function(t){e[t.name]=t.value})),e.likes=[],e.owner={_id:"2911d40eec43f0326fe3701b"},e}},{key:"setEventListeners",value:function(){var e=this;I(R(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){I(R(a.prototype),"close",this).call(this),this._popupElement.reset()}}])&&O(t.prototype,n),a}(b);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(r);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return A(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).handleFormWithDeleteSubmit=n,r}return t=a,(n=[{key:"setEventListeners",value:function(e){var t=this;B(N(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(n){n.preventDefault(),t.handleFormWithDeleteSubmit(e)}))}}])&&x(t.prototype,n),a}(b);function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectorName=t,this._selectorDescription=n,this.apiPraktikum=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._selectorName.textContent,userDescription:this._selectorDescription.textContent}}},{key:"setUserInfo",value:function(e,t){var n=e.value,r=t.value;this._selectorName.textContent=n,this._selectorDescription.textContent=r}},{key:"getUserInfoFromServer",value:function(){var e=this,t=document.querySelector(".profile__image");this.apiPraktikum.getProfileInfo().then((function(n){t.src=n.avatar,e._selectorName.textContent=n.name,e._selectorDescription.textContent=n.about})).catch((function(e){console.error(e)}))}}])&&F(t.prototype,n),e}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e){K.open(),K.setEventListeners(e)}function z(e,t){ee.open(e,t)}var $=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setNewProfile",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"postCardOnTheServer",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers})}},{key:"putLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}}])&&M(t.prototype,n),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"2be0f169-5c86-4181-b303-3b009feba466","Content-Type":"application/json"}}),G=new T(".popup_type_edit-user-profile",c,(function(){var e={name:h.value,about:d.value};G.renderLoading(!0),$.setNewProfile(e).then((function(){X.setUserInfo(h,d),G.close()})).finally((function(){G.renderLoading(!1)}))})),K=new V(".popup_type_removing_card",c,(function(e){$.deleteCard(e.id).then((function(){console.log("It is success"),e.remove()})).catch((function(e){console.log("It is error"),console.log(e)})).finally((function(){K.close()}))})),Q=new T(".popup_type_editing_photo_profile",c,(function(e){Q.renderLoading(!0),$.changeAvatar(e).then((function(){_.src=e.avatar,Q.close()})).catch((function(e){console.log(e)})).finally((function(){Q.renderLoading(!1)}))})),X=new H(f,p,$),Y=new i({renderer:function(e){var t=te(e);Y.addItem(t,!0)}},l),Z=new T(".popup_type_new-cards",c,(function(e){var t=te(e);Z.renderLoading(!0),$.postCardOnTheServer(e).then((function(){Y.addItem(t),y.classList.add(a.inactiveButtonClass),Z.close()})).finally((function(){Z.renderLoading(!1)}))})),ee=new L(".popup_type_image",c);function te(e){return new t(".card-template",e,z,W,$).getElement()}Q.setEventListeners(),G.setEventListeners(),Z.setEventListeners(),ee.setEventListeners(),v.addEventListener("click",(function(){Q.open()})),u.addEventListener("click",(function(){G.open(),ne.clearProfileErrors();var e=X.getUserInfo();h.value=e.userName,d.value=e.userDescription})),s.addEventListener("click",(function(){Z.open(),ne.clearProfileErrors(),y.classList.add(a.inactiveButtonClass)})),v.addEventListener("click",(function(){Q.open()}));var ne=new r(a.formSelector,a);ne.enableValidation(),new r(a.formSelectorCard,a).enableValidation(),Promise.all([$.getInitialCards(),X.getUserInfoFromServer()]).then((function(e){var t,n,r=(t=e,n=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];Y.renderItems(r)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwibmFtZXMiOlsiQ2FyZCIsImNhcmRTZWxlY3RvciIsImNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiYXBpUHJha3Rpa3VtIiwidGhpcyIsIl9zZWxlY3RvciIsIl9jYXJkaW1hZ2UiLCJsaW5rIiwiX2NhcmRUaXRsZSIsIm5hbWUiLCJfY2FyZExpa2VzIiwibGlrZXMiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlVHJhc2hDbGljayIsIl9hcGlQcmFrdGlrdW0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZXZlbnQiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwicmVtb3ZlIiwiZXZ0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2FyZENoaWxkIiwibGlrZXNDb250YWluZXIiLCJpc0l0TnVsbCIsImNvdW50TGlrZXMiLCJfaGFuZGxlQ291bnRMaWtlcyIsImNhcmRJRCIsImNvdW50ZXJMaWtlc0VsZW1lbnQiLCJpc0xpa2VkIiwiZGVsZXRlTGlrZSIsInRoZW4iLCJjb3VudExpa2VzRnJvbVNlcnZlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwicHV0TGlrZSIsIl9nZXRUZW1wbGF0ZSIsImlkIiwiY2FyZEltYWdlRWxlbWVudCIsImNhcmRUcmFzaEljb24iLCJzcmMiLCJhbHQiLCJnZXRQcm9maWxlSW5mbyIsInByb2ZpbGVEYXRhIiwiX3NldExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtU2VsZWN0b3IiLCJvYmplY3QiLCJfZm9ybUVsZW1lbnQiLCJfb2JqZWN0IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Zvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yIiwiX2Zvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfZ2V0RXJyb3JNZXNzYWdlIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJpbnZhbGlkIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0luVmFsaWRJbnB1dCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBJbnB1dCIsInBvcHVwU3VibWl0IiwicG9wdXBJbnB1dEVycm9yIiwiaXRlbSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJlbGVtZW50IiwiaXNBcnJheSIsImFwcGVuZCIsInByZXBlbmQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yQ2FyZCIsIm92ZXJsYXkiLCJwb3B1cE9wZW5Qcm9maWxlQnV0dG9uIiwicG9wdXBDYXJkc09wZW5CdXR0b24iLCJjYXJkc0NvbnRhaW5lciIsInRleHRQcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlSm9iSW5wdXQiLCJhZGRpbmdJbmFjdGl2ZUNsYXNzRm9yU3VibWl0IiwicHJvZmlsZUltYWdlIiwicHJvZmlsZVBob3RvQ29udGFpbmVyIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfb3ZlcmxheSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiY3VycmVudFRhcmdldCIsImlzTG9hZGluZyIsImlubmVySFRNTCIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQiLCJfcG9wdXBDYXB0aW9uSW1hZ2VCaWdJbWFnZUVsZW1lbnQiLCJpbWFnZUxpbmsiLCJpbWFnZVRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aERlbGV0ZSIsImhhbmRsZUZvcm1XaXRoRGVsZXRlU3VibWl0IiwiVXNlckluZm8iLCJ1c2VyTmFtZUVsZW1lbnQiLCJ1c2VyRGVzY3JpcHRpb25FbGVtZW50IiwiX3NlbGVjdG9yTmFtZSIsIl9zZWxlY3RvckRlc2NyaXB0aW9uIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJuYW1lSW5wdXRWYWx1ZSIsImpvYklucHV0VmFsdWUiLCJwcm9maWxlIiwiYXZhdGFyIiwiYWJvdXQiLCJlcnJvciIsImNvbnNvbGUiLCJ0cmFzaFBvcHVwIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiaW1hZ2VQb3B1cCIsImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwicmVzIiwiX2dldFJlc3BvbnNlRGF0YSIsInByb2ZpbGVJbmZvIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJuZXdDYXJkIiwiY2FyZElkIiwiZGF0YSIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlUG9wVXAiLCJyZW5kZXJMb2FkaW5nIiwic2V0TmV3UHJvZmlsZSIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJkZWxldGVDYXJkIiwibG9nIiwiZXJyIiwicG9wdXBXaXRoRWRpdFBob3RvIiwibmV3TGluayIsImNoYW5nZUF2YXRhciIsImNhcmRzTGlzdCIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiYWRkQ2FyZFBvcHVwIiwib2JqZWN0TmV3Q2FyZCIsIm5ld0VsZW1lbnQiLCJwb3N0Q2FyZE9uVGhlU2VydmVyIiwiZ2V0RWxlbWVudCIsImVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvciIsImNsZWFyUHJvZmlsZUVycm9ycyIsInByb2ZpbGVEYXRhRnJvbVBhZ2UiLCJnZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mb0Zyb21TZXJ2ZXIiLCJ2YWx1ZXMiLCJpbml0aWFsQ2FyZHMiLCJyZW5kZXJJdGVtcyJdLCJtYXBwaW5ncyI6InlMQUFPLElBQU1BLEVBQWIsV0FDRSxXQUNFQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxJLDRGQUNBLFNBQ0FDLEtBQUtDLFVBQVlOLEVBQ2pCSyxLQUFLRSxXQUFhTixFQUFLTyxLQUN2QkgsS0FBS0ksV0FBYVIsRUFBS1MsS0FDdkJMLEtBQUtNLFdBQWFWLEVBQUtXLE1BQ3ZCUCxLQUFLUSxRQUFVWixFQUFLYSxJQUNwQlQsS0FBS1UsU0FBV2QsRUFBS2UsTUFBTUYsSUFDM0JULEtBQUtZLGlCQUFtQmYsRUFDeEJHLEtBQUthLGtCQUFvQmYsRUFDekJFLEtBQUtjLGNBQWdCZixFLFFBaEJ6QixPLEVBQUEsRyxFQUFBLHNDQW9CSSxPQUFPZ0IsU0FBU0MsY0FBY2hCLEtBQUtDLFdBQVdnQixRQUFRQyxXQUFVLEtBcEJwRSx5Q0F1QnFCQyxHQUNDQSxFQUFNQyxPQUFPQyxXQUNyQkMsV0F6QmQsdUNBNEJtQkMsR0FDZkEsRUFBSUgsT0FBT0ksVUFBVUMsT0FBTyx1QkE3QmhDLHNDQWdDa0IsV0FFZHpCLEtBQUswQixTQUNGVixjQUFjLGdCQUNkVyxpQkFBaUIsU0FBUyxTQUFDUixHQUMxQixJQUFNUyxFQUFZVCxFQUFNQyxPQUFPQyxXQUMvQixFQUFLUixrQkFBa0JlLE1BRzNCNUIsS0FBSzBCLFNBQ0ZWLGNBQWMsZ0JBQ2RXLGlCQUFpQixTQUFTLFdBQ3pCLEVBQUtmLGlCQUFpQixFQUFLVixXQUFZLEVBQUtFLGVBR2hESixLQUFLMEIsU0FDRlYsY0FBYyxlQUNkVyxpQkFBaUIsU0FBUyxTQUFDSixHQUMxQkEsRUFBSUgsT0FBT0ksVUFBVUMsT0FBTyxxQkFDNUIsSUFBTUksRUFBaUJOLEVBQUlILE9BQU9DLFdBRTdCUyxFQUFZRCxFQUFlYixjQUFjLHNCQUV4Q2UsRUFBYUYsRUFBZWIsY0FBYyx1QkFDakQsRUFBS2dCLGtCQUFrQixFQUFLeEIsUUFBUXVCLEVBQVdELFFBeER0RCx3Q0E0RG9CRyxFQUFRQyxFQUFxQkMsR0FDOUIsTUFBWEEsRUFDeUJuQyxLQUFLYyxjQUFlc0IsV0FBV0gsR0FDdkNJLE1BQUssU0FBQ0MsR0FDdkJKLEVBQW9CSyxZQUFjRCxFQUFxQi9CLE1BQU1pQyxVQUcxQ3hDLEtBQUtjLGNBQWUyQixRQUFRUixHQUNwQ0ksTUFBSyxTQUFDQyxHQUNqQkosRUFBb0JLLFlBQWNELEVBQXFCL0IsTUFBTWlDLFlBckVyRSxtQ0EwRWUsV0FDWHhDLEtBQUswQixTQUFXMUIsS0FBSzBDLGVBQ04xQyxLQUFLMEIsU0FBU1YsY0FBYyxTQUNwQzJCLEdBQUszQyxLQUFLUSxRQUNqQixJQUFNb0MsRUFBbUI1QyxLQUFLMEIsU0FBU1YsY0FBYyxnQkFDL0NrQixFQUFzQmxDLEtBQUswQixTQUFTVixjQUN4Qyx1QkFFSTZCLEVBQWdCN0MsS0FBSzBCLFNBQVNWLGNBQWMsZ0JBaUJsRCxPQWZBNEIsRUFBaUJFLElBQU05QyxLQUFLRSxXQUM1QjBDLEVBQWlCRyxJQUFNL0MsS0FBS0ksV0FDNUI4QixFQUFvQkssWUFBY3ZDLEtBQUtNLFdBQVdrQyxPQUNsRHhDLEtBQUswQixTQUFTVixjQUFjLGdCQUFnQnVCLFlBQWN2QyxLQUFLSSxXQUMvREosS0FBS2MsY0FBY2tDLGlCQUNsQlgsTUFBSyxTQUFDWSxHQUVELEVBQUt2QyxXQUFhdUMsRUFBWXhDLE1BRWhDb0MsRUFBY0MsSUFBTSxHQUNwQkQsRUFBY0UsSUFBTSxPQUl4Qi9DLEtBQUtrRCxnQkFDRWxELEtBQUswQixjLGlCQW5HaEIsSyxzS0NBTyxJQUFNeUIsRUFBYixXQUNFLFdBQVlDLEVBQWNDLEksNEZBQVEsU0FDaENyRCxLQUFLc0QsYUFBZXZDLFNBQVNDLGNBQWNvQyxHQUMzQ3BELEtBQUt1RCxRQUFVRixFQUNmckQsS0FBS3dELGVBQWlCSCxFQUFPSSxjQUM3QnpELEtBQUswRCxzQkFBd0JMLEVBQU9NLHFCQUNwQzNELEtBQUs0RCxxQkFBdUJQLEVBQU9RLG9CQUNuQzdELEtBQUs4RCxZQUFjVCxFQUFPVSxXQUMxQi9ELEtBQUtnRSxpQkFBbUJYLEVBQU9ZLGdCQUMvQmpFLEtBQUtrRSwyQkFBNkJiLEVBQU9jLDBCQUN6Q25FLEtBQUtvRSxpQ0FBbUNmLEVBQU9nQixnQyxRQVZuRCxPLEVBQUEsRyxFQUFBLHVDQWNrQkMsRUFBYUMsRUFBY0MsR0FDekMsSUFBTUMsRUFBZUgsRUFBWXRELGNBQVosV0FBOEJ1RCxFQUFhNUIsR0FBM0MsV0FFckI4QixFQUFhbEMsWUFBY2lDLEVBQzNCQyxFQUFhakQsVUFBVWtELElBQUkxRSxLQUFLdUQsUUFBUVEsWUFFeENRLEVBQWEvQyxVQUFVa0QsSUFBSTFFLEtBQUt1RCxRQUFRVSxtQkFwQjVDLHNDQXdCa0JLLEVBQWFDLEdBQzNCLElBQU1FLEVBQWVILEVBQVl0RCxjQUFaLFdBQThCdUQsRUFBYTVCLEdBQTNDLFdBRXJCOEIsRUFBYWxDLFlBQWMsR0FDM0JrQyxFQUFhakQsVUFBVUYsT0FBT3RCLEtBQUt1RCxRQUFRUSxZQUUzQ1EsRUFBYS9DLFVBQVVGLE9BQU90QixLQUFLdUQsUUFBUVUsbUJBOUIvQyx1Q0FpQ21CTSxHQUNmLE9BQU9BLEVBQWFJLG9CQWxDeEIsMENBc0NzQkwsRUFBYUMsR0FHL0IsR0FGeUJBLEVBQWFLLFNBQVNDLE1BUTdDN0UsS0FBSzhFLGdCQUFnQlIsRUFBYUMsT0FOZixDQUNuQixJQUFNQyxFQUFleEUsS0FBSytFLGlCQUFpQlIsR0FFM0N2RSxLQUFLZ0YsZ0JBQWdCVixFQUFhQyxFQUFjQyxNQTVDdEQsdUNBbURtQlMsR0FJZixPQUhjQSxFQUFVQyxNQUN0QixTQUFDWCxHQUFELE9BQW1CQSxFQUFhSyxTQUFTQyxXQXJEL0MseUNBMERxQk0sRUFBZUMsR0FDNUJBLEdBQ0ZELEVBQWMzRCxVQUFVa0QsSUFBSTFFLEtBQUt1RCxRQUFRTSxxQkFFekNzQixFQUFjRSxhQUFhLFlBQVksS0FFdkNGLEVBQWMzRCxVQUFVRixPQUFPdEIsS0FBS3VELFFBQVFNLHFCQUU1Q3NCLEVBQWNHLGdCQUFnQixlQWxFcEMseUNBc0VxQmhCLEdBQWEsV0FDeEJXLEVBQVlNLE1BQU1DLEtBQ3RCbEIsRUFBWW1CLGlCQUFpQnpGLEtBQUt1RCxRQUFRRSxnQkFFdEMwQixFQUFnQmIsRUFBWXRELGNBQ2hDaEIsS0FBS3VELFFBQVFJLHNCQUdmc0IsRUFBVVMsU0FBUSxTQUFDbkIsR0FDakJBLEVBQWE1QyxpQkFBaUIsU0FBUyxXQUNyQyxFQUFLZ0Usb0JBQW9CckIsRUFBYUMsR0FDdEMsSUFBTWEsRUFBVSxFQUFLUSxpQkFBaUJYLEdBQ3RDLEVBQUtZLG1CQUFtQlYsRUFBZUMsV0FsRi9DLHlDQXdGSXBGLEtBQUtzRCxhQUFhM0IsaUJBQWlCLFVBQVUsU0FBQ1IsR0FDNUNBLEVBQU0yRSxvQkFFUjlGLEtBQUsrRixtQkFBbUIvRixLQUFLc0QsYUFBY3RELEtBQUt1RCxXQTNGcEQsMkNBOEZ1QixXQUNieUMsRUFBYWpGLFNBQVMwRSxpQkFBaUJ6RixLQUFLa0UsNEJBQzVDK0IsRUFBY2xGLFNBQVNDLGNBQWNoQixLQUFLMEQsdUJBQzFDd0MsRUFBa0JuRixTQUFTMEUsaUJBQWlCekYsS0FBS29FLGtDQUM3QixJQUF0QjRCLEVBQVd4RCxTQUNid0QsRUFBV04sU0FBUSxTQUFDUyxHQUNsQkEsRUFBSzNFLFVBQVVGLE9BQU8sRUFBSzBDLHFCQUU3QmlDLEVBQVl6RSxVQUFVRixPQUFPdEIsS0FBSzRELHNCQUNILElBQTNCc0MsRUFBZ0IxRCxRQUNsQjBELEVBQWdCUixTQUFRLFNBQUNTLEdBQ3ZCQSxFQUFLM0UsVUFBVUYsT0FBTyxFQUFLd0Msc0IsaUJBekdyQyxLLHNLQ0FPLElBQU1zQyxFQUFiLFdBQ0UsYUFBMEJDLEdBQW1CLElBQS9CQyxFQUErQixFQUEvQkEsVSw0RkFBK0IsU0FDM0N0RyxLQUFLdUcsVUFBWUQsRUFDakJ0RyxLQUFLd0csbUJBQXFCSCxFLFFBSDlCLE8sRUFBQSxHLEVBQUEsbUNBTWNJLEdBQU8sV0FDakJBLEVBQU1mLFNBQVEsU0FBQzlGLEdBQ2IsRUFBSzJHLFVBQVUzRyxRQVJyQiw4QkFZVThHLEVBQVNDLEdBQ1hBLEVBQ0YzRyxLQUFLd0csbUJBQW1CSSxPQUFPRixHQUUvQjFHLEtBQUt3RyxtQkFBbUJLLFFBQVFILFEsaUJBaEJ0QyxLQ0FhSSxFQUFtQixDQUM5QjFELGFBQWMsZ0NBQ2QyRCxpQkFBa0Isd0JBQ2xCNUMsMEJBQTRCLDJCQUM1QkUsZ0NBQWdDLHNCQUNoQ1osY0FBZSxnQkFDZkUscUJBQXNCLGlCQUN0QkUsb0JBQXFCLHlCQUNyQkUsV0FBWSw0QkFDWkUsZ0JBQWlCLDJCQUdOK0MsRUFBVSxXQU9WQyxFQUF5QmxHLFNBQVNDLGNBQWMsdUJBQ2hEa0csRUFBdUJuRyxTQUFTQyxjQUFjLG9CQUM5Q21HLEVBQWlCcEcsU0FBU0MsY0FBYyxhQUN4Q29HLEVBQWtCckcsU0FBU0MsY0FBYyxrQkFDekNxRyxFQUFxQnRHLFNBQVNDLGNBQWMseUJBQzVDc0csRUFBbUJ2RyxTQUFTQyxjQUFjLDZCQUMxQ3VHLEVBQWtCeEcsU0FBU0MsY0FBYyw0QkFDekN3RyxFQUErQnpHLFNBQVNDLGNBQWMsd0JBQ3REeUcsRUFBZTFHLFNBQVNDLGNBQWMsbUJBQ3RDMEcsRUFBd0IzRyxTQUFTQyxjQUFjLDZCLDBLQzVCdkMyRyxFLFdBQ25CLFdBQVlDLEVBQWNaLEksNEZBQVMsU0FDakNoSCxLQUFLNkgsY0FBZ0I5RyxTQUFTQyxjQUFjNEcsR0FDNUM1SCxLQUFLOEgsZ0JBQWtCOUgsS0FBSzhILGdCQUFnQkMsS0FBSy9ILE1BQ2pEQSxLQUFLZ0ksU0FBV2pILFNBQVNDLGNBQWNnRyxHLG9EQUl2Q2hILEtBQUs2SCxjQUFjckcsVUFBVWtELElBQUksZ0JBQ2pDMUUsS0FBS2dJLFNBQVN4RyxVQUFVa0QsSUFBSSxtQkFDM0IzRCxTQUFTWSxpQkFBaUIsUUFBUzNCLEtBQUs4SCxtQiw4QkFJekM5SCxLQUFLNkgsY0FBY3JHLFVBQVVGLE9BQU8sZ0JBQ3BDdEIsS0FBS2dJLFNBQVN4RyxVQUFVRixPQUFPLG1CQUMvQlAsU0FBU2tILG9CQUFvQixRQUFTakksS0FBSzhILG1CLHNDQUc3QjNHLEdBQ2RBLEVBQU0yRSxpQkFDWSxXQUFkM0UsRUFBTStHLEtBQ1JsSSxLQUFLbUksVSwwQ0FJVyxXQUNsQm5JLEtBQUs2SCxjQUFjbEcsaUJBQWlCLFNBQVMsU0FBQ1IsR0FDeENBLEVBQU1DLE9BQU9JLFVBQVU0RyxTQUFTLGlCQUVqQyxFQUFLRCxXQUdWbkksS0FBS2dJLFNBQVNyRyxpQkFBaUIsU0FBUyxTQUFDUixHQUNuQ0EsRUFBTUMsU0FBV0QsRUFBTWtILGVBQ3pCLEVBQUtGLGEsb0NBS0dHLEdBQ1N0SSxLQUFLNkgsY0FBYzdHLGNBQWMsa0JBRXJDdUgsVUFEWEQsRUFDdUIsZ0JBRUEsaUIsd21DQzNDWkUsRSxrcEJBQ25CLFdBQVlaLEVBQWNaLEdBQVEsYSw0RkFBQSxVQUNoQyxjQUFNWSxFQUFjWixJQUNmeUIsMkJBQTZCLEVBQUtaLGNBQWM3RyxjQUFjLGlCQUNuRSxFQUFLMEgsa0NBQW9DLEVBQUtiLGNBQWM3RyxjQUFjLG1CQUgxQyxFLDBDQU03QjJILEVBQVdDLEdBRWQseUNBR0E1SSxLQUFLeUksMkJBQTJCMUYsSUFBTTZGLEVBQ3RDNUksS0FBS3lJLDJCQUEyQjNGLElBQU02RixFQUN0QzNJLEtBQUswSSxrQ0FBa0NuRyxZQUFjcUcsTyxvQkFkYmpCLEcsa2xDQ0F2QmtCLEUsa3BCQUNuQixXQUFZakIsRUFBY1osRUFBUThCLEdBQWtCLGEsNEZBQUEsVUFDbEQsY0FBTWxCLEVBQWNaLElBQ2YrQixrQkFBb0JELEVBRnlCLEUsdURBTWxELElBQ01FLEVBQWMsR0FxQnBCLE9BVHlCaEosS0FBSzZILGNBQWNwQyxpQkFDMUMsaUJBR2VDLFNBQVEsU0FBQWdCLEdBQ3ZCc0MsRUFBWXRDLEVBQVFyRyxNQUFRcUcsRUFBUXVDLFNBRXRDRCxFQUFZekksTUFwQk0sR0FxQmxCeUksRUFBWXJJLE1BWkksQ0FDZEYsSUFBSyw0QkFZQXVJLEksMENBR1csV0FDbEIsc0RBQ0FoSixLQUFLNkgsY0FBY2xHLGlCQUFpQixVQUFTLFNBQUNKLEdBQzVDQSxFQUFJdUUsaUJBQ0osRUFBS2lELGtCQUFrQixFQUFLRyx3Qiw4QkFLOUIsMENBQ0RsSixLQUFLNkgsY0FBY3NCLGEsb0JBMUNxQnhCLEcsa2xDQ0F0QnlCLEUsa3BCQUNuQixXQUFZeEIsRUFBZVosRUFBU3FDLEdBQTRCLGEsNEZBQUEsVUFDOUQsY0FBTXpCLEVBQWNaLElBQ2ZxQywyQkFBNkJBLEVBRjRCLEUsdURBSzlDekosR0FBTSxXQUN0QixzREFDQUksS0FBSzZILGNBQWNsRyxpQkFBaUIsVUFBUyxTQUFDSixHQUM1Q0EsRUFBSXVFLGlCQUNKLEVBQUt1RCwyQkFBMkJ6SixXLG9CQVZPK0gsRywwS0NGeEIyQixFLFdBQ25CLFdBQVlDLEVBQWlCQyxFQUF1QnpKLEksNEZBQWMsU0FDaEVDLEtBQUt5SixjQUFnQkYsRUFDckJ2SixLQUFLMEoscUJBQXVCRixFQUM1QnhKLEtBQUtELGFBQWVBLEUsMkRBWXRCLE1BTG9CLENBQ2hCNEosU0FKVzNKLEtBQUt5SixjQUFjbEgsWUFLOUJxSCxnQkFKa0I1SixLQUFLMEoscUJBQXFCbkgsZSxrQ0FVcENvSCxFQUFVQyxHQUNwQixJQUFNQyxFQUFpQkYsRUFBU1YsTUFDMUJhLEVBQWdCRixFQUFnQlgsTUFFdENqSixLQUFLeUosY0FBY2xILFlBQWNzSCxFQUNqQzdKLEtBQUswSixxQkFBcUJuSCxZQUFjdUgsSSw4Q0FHbEIsV0FDaEJyQyxFQUFlMUcsU0FBU0MsY0FBYyxtQkFFNUNoQixLQUFLRCxhQUFhaUQsaUJBQ2pCWCxNQUFLLFNBQUMwSCxHQUNMdEMsRUFBYTNFLElBQU1pSCxFQUFRQyxPQUMzQixFQUFLUCxjQUFjbEgsWUFBY3dILEVBQVExSixLQUN6QyxFQUFLcUoscUJBQXFCbkgsWUFBY3dILEVBQVFFLFNBSmxELE9BTU8sU0FBQ0MsR0FDTkMsUUFBUUQsTUFBTUEsVyxzU0NyQnBCLFNBQVNwSyxFQUFpQkYsR0FDeEJ3SyxFQUFXQyxPQUNYRCxFQUFXRSxrQkFBa0IxSyxHQXdFL0IsU0FBU0MsRUFBZ0JNLEVBQU1FLEdBQzdCa0ssR0FBV0YsS0FBS2xLLEVBQU1FLEdBSXhCLElBQU1OLEVBQWUsSSxXQzlGbkIsV0FBWXlLLEksNEZBQVEsU0FFbEJ4SyxLQUFLeUssUUFBVUQsRUFBT0MsUUFDdEJ6SyxLQUFLMEssUUFBVUYsRUFBT0UsUSw4REFHUHpCLEdBQ2YsT0FBSUEsRUFBTTBCLEdBQ0QxQixFQUFNMkIsT0FHTkMsUUFBUUMsT0FBUixrQkFBMEI3QixFQUFNOEIsVyx1Q0FJMUIsV0FDZixPQUFPQyxNQUFNLEdBQUQsT0FBSWhMLEtBQUt5SyxRQUFULGFBQTZCLENBQ3ZDQyxRQUFTMUssS0FBSzBLLFVBRWZySSxNQUFLLFNBQUM0SSxHQUNMLE9BQU8sRUFBS0MsaUJBQWlCRCxRLHdDQUlmLFdBQ2hCLE9BQU9ELE1BQU0sR0FBRCxPQUFJaEwsS0FBS3lLLFFBQVQsVUFBMEIsQ0FDcENDLFFBQVMxSyxLQUFLMEssVUFFZnJJLE1BQUssU0FBQzRJLEdBQ0wsT0FBTyxFQUFLQyxpQkFBaUJELFEsb0NBSWpCRSxHQUFhLFdBQzNCLE9BQU9ILE1BQU0sR0FBRCxPQUFJaEwsS0FBS3lLLFFBQVQsYUFBNkIsQ0FDdkNXLE9BQVEsUUFDUlYsUUFBUzFLLEtBQUswSyxRQUNkVyxLQUFNQyxLQUFLQyxVQUFVSixLQUVwQjlJLE1BQUssU0FBQzRJLEdBQ0wsT0FBTyxFQUFLQyxpQkFBaUJELFEsMENBSWZPLEdBQVMsV0FDM0IsT0FBT1IsTUFBTSxHQUFELE9BQUloTCxLQUFLeUssUUFBVCxVQUEwQixDQUNwQ1csT0FBUSxPQUNSVixRQUFTMUssS0FBSzBLLFFBQ2RXLEtBQU1DLEtBQUtDLFVBQVVDLEtBRXBCbkosTUFBSyxTQUFDNEksR0FDTCxPQUFPLEVBQUtDLGlCQUFpQkQsUSxtQ0FJdEI5SyxHQUFNLFdBQ2pCLE9BQU82SyxNQUFNLEdBQUQsT0FBSWhMLEtBQUt5SyxRQUFULG9CQUFvQyxDQUM5Q1csT0FBUSxRQUNSVixRQUFTMUssS0FBSzBLLFFBQ2RXLEtBQU1DLEtBQUtDLFVBQVVwTCxLQUVwQmtDLE1BQUssU0FBQzRJLEdBQ0wsT0FBTyxFQUFLQyxpQkFBaUJELFEsaUNBSXhCaEosR0FDVCxPQUFPK0ksTUFBTSxHQUFELE9BQUloTCxLQUFLeUssUUFBVCxrQkFBMEJ4SSxHQUFVLENBQzlDbUosT0FBUSxTQUNSVixRQUFTMUssS0FBSzBLLFksOEJBSVZlLEdBQVEsV0FDZCxPQUFPVCxNQUFNLEdBQUQsT0FBSWhMLEtBQUt5SyxRQUFULHdCQUFnQ2dCLEdBQVUsQ0FDcERMLE9BQVEsTUFDUlYsUUFBUzFLLEtBQUswSyxVQUVickksTUFBSyxTQUFDNEksR0FDTCxPQUFPLEVBQUtDLGlCQUFpQkQsTUFFOUI1SSxNQUFLLFNBQUNxSixHQUNMLE9BQU9BLE8saUNBSUZELEdBQVEsV0FDakIsT0FBT1QsTUFBTSxHQUFELE9BQUloTCxLQUFLeUssUUFBVCx3QkFBZ0NnQixHQUFVLENBQ3BETCxPQUFRLFNBQ1JWLFFBQVMxSyxLQUFLMEssVUFFYnJJLE1BQUssU0FBQzRJLEdBQ0wsT0FBTyxFQUFLQyxpQkFBaUJELE1BRTlCNUksTUFBSyxTQUFDcUosR0FDTCxPQUFPQSxVLHNCRERNLENBQVEsQ0FDM0JqQixRQUFTLDhDQUNUQyxRQUFTLENBQ1BpQixjQUFlLHVDQUNmLGVBQWdCLHNCQUlkQyxFQUFlLElBQUkvQyxFTnRGZSxnQ013RnRDN0IsR0FwRUYsV0FFRSxJQUFNbUUsRUFBYyxDQUNsQjlLLEtBQU1pSCxFQUFpQjJCLE1BQ3ZCZ0IsTUFBTzFDLEVBQWdCMEIsT0FFekIyQyxFQUFhQyxlQUFjLEdBQzNCOUwsRUFBYStMLGNBQWNYLEdBQzFCOUksTUFBSyxXQUNKMEosRUFBU0MsWUFBWTFFLEVBQWtCQyxHQUN2Q3FFLEVBQWF6RCxXQUhmLFNBS1MsV0FDUHlELEVBQWFDLGVBQWMsU0EyRHpCekIsRUFBYSxJQUFJaEIsRU45RlcsNEJNOEZ3QnBDLEdBcEMxRCxTQUFvQ3BILEdBQ2xDRyxFQUFha00sV0FBV3JNLEVBQUsrQyxJQUM1Qk4sTUFBSyxXQUNKOEgsUUFBUStCLElBQUksaUJBQ1p0TSxFQUFLMEIsWUFIUCxPQU1PLFNBQUE2SyxHQUNMaEMsUUFBUStCLElBQUksZUFDWi9CLFFBQVErQixJQUFJQyxNQVJkLFNBVVMsV0FFUC9CLEVBQVdqQyxjQXlCVGlFLEVBQXFCLElBQUl2RCxFTjdGYyxvQ00rRjNDN0IsR0E1RkYsU0FBc0NxRixHQUNwQ0QsRUFBbUJQLGVBQWMsR0FDakM5TCxFQUFhdU0sYUFBYUQsR0FDekJoSyxNQUFLLFdBQ0pvRixNQUFtQjRFLEVBQVFyQyxPQUMzQm9DLEVBQW1CakUsV0FIckIsT0FLTyxTQUFDK0IsR0FDTkMsUUFBUStCLElBQUloQyxNQU5kLFNBUVMsV0FDUGtDLEVBQW1CUCxlQUFjLFNBcUYvQkUsRUFBVyxJQUFJekMsRUFDbkJsQyxFQUNBQyxFQUNBdEgsR0FHSXdNLEVBQVksSUFBSW5HLEVBQ3BCLENBQ0VFLFNBQVUsU0FBQzFHLEdBQ1QsSUFBTThHLEVBQVU4RixHQUFXNU0sR0FDM0IyTSxFQUFVRSxRQUFRL0YsR0FBUSxLQUc5QlMsR0FHSXVGLEVBQWUsSUFBSTdELEVOeEhTLHdCTXdIeUI3QixHQS9FM0QsU0FBMEIyRixHQUV4QixJQUFNQyxFQUFhSixHQUFXRyxHQUM5QkQsRUFBYWIsZUFBYyxHQUMzQjlMLEVBQWE4TSxvQkFBb0JGLEdBQ2hDdEssTUFBSyxXQUNIa0ssRUFBVUUsUUFBUUcsR0FFbkJwRixnQkFDRVYsRUFBaUJqRCxxQkFHcEI2SSxFQUFhdkUsV0FSZCxTQVVTLFdBQ1B1RSxFQUFhYixlQUFjLFNBa0V6QnRCLEdBQWEsSUFBSS9CLEVOekhXLG9CTXlId0J4QixHQWtDMUQsU0FBU3dGLEdBQVc1TSxHQVVsQixPQVRvQixJQUFJRixFTjFKRSxpQk00SnhCRSxFQUNBQyxFQUNBQyxFQUNBQyxHQUcwQitNLGFBeEM5QlYsRUFBbUI5QixvQkFDbkJzQixFQUFhdEIsb0JBQ2JvQyxFQUFhcEMsb0JBQ2JDLEdBQVdELG9CQUVYNUMsRUFBc0IvRixpQkFBaUIsU0FBUyxXQUM5Q3lLLEVBQW1CL0IsVUFHckJwRCxFQUF1QnRGLGlCQUFpQixTQUFTLFdBQy9DaUssRUFBYXZCLE9BQ2IwQyxHQUF5QkMscUJBQ3pCLElBQU1DLEVBQXNCbEIsRUFBU21CLGNBRXJDNUYsUUFBeUIyRixFQUFvQnRELFNBQzdDcEMsUUFBd0IwRixFQUFvQnJELG1CQUc5QzFDLEVBQXFCdkYsaUJBQWlCLFNBQVMsV0FDN0MrSyxFQUFhckMsT0FDYjBDLEdBQXlCQyxxQkFDekJ4RixnQkFDRVYsRUFBaUJqRCx3QkFJckI2RCxFQUFzQi9GLGlCQUFpQixTQUFTLFdBQzlDeUssRUFBbUIvQixVQWlCckIsSUFBTTBDLEdBQTJCLElBQUk1SixFQUNuQzJELEVBQWlCMUQsYUFDakIwRCxHQUdGaUcsR0FBeUJJLG1CQUVBLElBQUloSyxFQUMzQjJELEVBQWlCQyxpQkFDakJELEdBRWVxRyxtQkFHakJ0QyxRQUFRdUMsSUFBSSxDQUNWck4sRUFBYXNOLGtCQUNidEIsRUFBU3VCLDBCQUVWakwsTUFBSyxTQUFDa0wsR0FBVyxJLElBQ1RDLEcsRUFBZ0JELEUsRUFEUCxFLGt6QkFBQSxHQUVoQmhCLEVBQVVrQixZQUFZRCxNQU54QixPQVFPLFNBQUNyQixHQUNOaEMsUUFBUStCLElBQUlDLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGNhcmQsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVUcmFzaENsaWNrLFxyXG4gICAgYXBpUHJha3Rpa3VtXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NhcmRpbWFnZSA9IGNhcmQubGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IGNhcmQubmFtZTtcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGNhcmQubGlrZXM7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkLl9pZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBjYXJkLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sgPSBoYW5kbGVUcmFzaENsaWNrO1xyXG4gICAgdGhpcy5fYXBpUHJha3Rpa3VtID0gYXBpUHJha3Rpa3VtO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUNhcmRIYW5kbGVyKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjYXJkQ2hpbGQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgIGNhcmRDaGlsZC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9saWtlQ2FyZEhhbmRsZXIoZXZ0KSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9zZXRMaXN0ZW5lcnMoKSB7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRDaGlsZCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2soY2FyZENoaWxkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fY2FyZGltYWdlLCB0aGlzLl9jYXJkVGl0bGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgICAgICAgY29uc3QgbGlrZXNDb250YWluZXIgPSBldnQudGFyZ2V0LnBhcmVudE5vZGU7XHJcbiAgICAgICAgXHJcbiAgICAgICBjb25zdCBpc0l0TnVsbCA9ICBsaWtlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICBcclxuICAgICAgICBjb25zdCBjb3VudExpa2VzID0gbGlrZXNDb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhcmRfX2NvdW50ZXItbGlrZScpO1xyXG4gICAgICAgdGhpcy5faGFuZGxlQ291bnRMaWtlcyh0aGlzLl9jYXJkSWQsY291bnRMaWtlcyxpc0l0TnVsbCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNvdW50TGlrZXMoY2FyZElELCBjb3VudGVyTGlrZXNFbGVtZW50LCBpc0xpa2VkKXtcclxuICAgIGlmIChpc0xpa2VkID09IG51bGwpIHtcclxuICAgICAgY29uc3QgcHJvbWlzZURlbGV0ZUxpa2VzID0gdGhpcy5fYXBpUHJha3Rpa3VtIC5kZWxldGVMaWtlKGNhcmRJRCk7XHJcbiAgICAgIHByb21pc2VEZWxldGVMaWtlcy50aGVuKChjb3VudExpa2VzRnJvbVNlcnZlcikgPT4ge1xyXG4gICAgICAgIGNvdW50ZXJMaWtlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBjb3VudExpa2VzRnJvbVNlcnZlci5saWtlcy5sZW5ndGg7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcHJvbWlzZUxpa2VzID0gdGhpcy5fYXBpUHJha3Rpa3VtIC5wdXRMaWtlKGNhcmRJRCk7XHJcbiAgICAgIHByb21pc2VMaWtlcy50aGVuKChjb3VudExpa2VzRnJvbVNlcnZlcikgPT4ge1xyXG4gICAgICAgIGNvdW50ZXJMaWtlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBjb3VudExpa2VzRnJvbVNlcnZlci5saWtlcy5sZW5ndGg7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0RWxlbWVudCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgY29uc3QgY2FyZElEID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIik7XHJcbiAgICBjYXJkSUQuaWQgPSB0aGlzLl9jYXJkSWQ7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY291bnRlckxpa2VzRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuY2FyZF9fY291bnRlci1saWtlXCJcclxuICAgICk7XHJcbiAgICBjb25zdCBjYXJkVHJhc2hJY29uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpO1xyXG5cclxuICAgIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fY2FyZGltYWdlO1xyXG4gICAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9jYXJkVGl0bGU7XHJcbiAgICBjb3VudGVyTGlrZXNFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fY2FyZExpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmRUaXRsZTtcclxuICAgIHRoaXMuX2FwaVByYWt0aWt1bS5nZXRQcm9maWxlSW5mbygpXHJcbiAgICAudGhlbigocHJvZmlsZURhdGEpPT57XHJcbiAgICBcclxuICAgICAgaWYgKHRoaXMuX293bmVySWQgIT09IHByb2ZpbGVEYXRhLl9pZCkge1xyXG4gIFxyXG4gICAgICAgIGNhcmRUcmFzaEljb24uc3JjID0gXCJcIjtcclxuICAgICAgICBjYXJkVHJhc2hJY29uLmFsdCA9IFwiXCI7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICBcclxuICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IsIG9iamVjdCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb2JqZWN0LmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IG9iamVjdC5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvYmplY3QuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9iamVjdC5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yID0gb2JqZWN0LmZvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yID0gb2JqZWN0LmZvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3I7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKiAg0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5ICovXHJcbiAgX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29iamVjdC5lcnJvckNsYXNzKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vYmplY3QuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8qKiAg0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINGD0LTQsNC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LkgKi9cclxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuZXJyb3JDbGFzcyk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb2JqZWN0LmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0RXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIC8qKiDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0L/RgNC+0LLQtdGA0Y/QtdGCINCy0LDQu9C40LTQvdC+0YHRgtGMINC/0L7Qu9GPICovXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBpc0lucHV0Tm90VmFsaWQgPSAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG5cclxuICAgIGlmIChpc0lucHV0Tm90VmFsaWQpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZ2V0RXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIC8qKiAg0JXRgdC70Lgg0L/QvtC70LUg0L3QtSDQv9GA0L7RhdC+0LTQuNGCINCy0LDQu9C40LTQsNGG0LjRjiwg0L/QvtC60LDQttC10Lwg0L7RiNC40LHQutGDICovXHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvKiogINCV0YHQu9C4INC/0YDQvtGF0L7QtNC40YIsINGB0LrRgNC+0LXQvCAqL1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJblZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICBjb25zdCB2YWxpZCA9IGlucHV0TGlzdC5zb21lKFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHZhbGlkO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGJ1dHRvbkVsZW1lbnQsIGludmFsaWQpIHtcclxuICAgIGlmIChpbnZhbGlkKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcblxyXG4gICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29iamVjdC5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fb2JqZWN0LmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX29iamVjdC5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICBjb25zdCBpbnZhbGlkID0gdGhpcy5faGFzSW5WYWxpZElucHV0KGlucHV0TGlzdCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uRWxlbWVudCwgaW52YWxpZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybUVsZW1lbnQsIHRoaXMuX29iamVjdCk7XHJcbiAgfVxyXG5cclxuICBjbGVhclByb2ZpbGVFcnJvcnMoKSB7XHJcbiAgICBjb25zdCBwb3B1cElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yKTtcclxuICAgIGNvbnN0IHBvcHVwU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBjb25zdCBwb3B1cElucHV0RXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3IpO1xyXG4gICAgaWYgKHBvcHVwSW5wdXQubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIHBvcHVwSW5wdXQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICB9KTtcclxuICAgICAgcG9wdXBTdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgaWYgKHBvcHVwSW5wdXRFcnJvci5sZW5ndGggIT09IDApIHtcclxuICAgICAgICBwb3B1cElucHV0RXJyb3IuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGNhcmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQsIGlzQXJyYXkpIHtcclxuICAgIGlmIChpc0FycmF5KSB7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfdHlwZV9lZGl0LXVzZXItcHJvZmlsZVwiLFxyXG4gIGZvcm1TZWxlY3RvckNhcmQ6IFwiLnBvcHVwX3R5cGVfbmV3LWNhcmRzXCIsXHJcbiAgZm9ybVByb2ZpbGVJbnB1dHNTZWxlY3RvciA6IFwiLnBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZm9ybVByb2ZpbGVJbnB1dHNFcnJvcnNTZWxlY3RvcjpcIi5wb3B1cF9faW5wdXQtZXJyb3JcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdF9pbmFjdGl2ZVwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLCBcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBvdmVybGF5ID0gXCIub3ZlcmxheVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkc1NlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9uZXctY2FyZHNcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfaW1hZ2VcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwVHJhc2hTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfcmVtb3ZpbmdfY2FyZFwiO1xyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gXCIuY2FyZC10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9lZGl0LXVzZXItcHJvZmlsZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2VkaXRpbmdfcGhvdG9fcHJvZmlsZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBPcGVuUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZS1lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkc09wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3ZlY3RvclwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcclxuZXhwb3J0IGNvbnN0IHRleHRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faXRlbV9wcm9maWxlX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pdGVtX3Byb2ZpbGVfam9iXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfY2FyZHNfX3N1Ym1pdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGhvdG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Bob3RvX2NvbnRhaW5lclwiKTtcclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLG92ZXJsYXkpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9vdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvdmVybGF5KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX292ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXlfdmlzaWJsZVwiKTtcclxuICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX292ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXlfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9IFxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT57XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpKSB7XHJcbiAgIFxyXG4gICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgfSAgXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLl9vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHsgXHJcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHsgXHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9IFxyXG4gICAgfSk7IFxyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpe1xyXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0Jyk7XHJcbiAgICAgIGlmIChpc0xvYWRpbmcpe1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcclxuICAgICAgfSAgIFxyXG4gICB9O1xyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLG92ZXJsYXkpe1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcixvdmVybGF5KVxyXG4gICAgdGhpcy5fcG9wdXBJbWFnZUJpZ0ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbkltYWdlQmlnSW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGltYWdlTGluaywgaW1hZ2VUaXRsZSkge1xyXG4gICAgLyoqINCy0YvQt9GL0LLQsNC10Lwg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC80LXRgtC+0LQgKi9cclxuICAgIHN1cGVyLm9wZW4oKTsgXHJcblxyXG4gICAgLyoqINC00L7Qv9C+0LvQvdC40Lwgb3BlbiDQvdC+0LLQvtC5INGE0YPQvdC60YbQuNC+0L3QsNC70YzQvdC+0YHRgtGM0Y4gKi9cclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQuYWx0ID0gaW1hZ2VUaXRsZTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQuc3JjID0gaW1hZ2VMaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uSW1hZ2VCaWdJbWFnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbWFnZVRpdGxlO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcixvdmVybGF5LGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3Isb3ZlcmxheSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGVtcHR5TGlrZSA9IFtdO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGNvbnN0IGVtcHR5SWQgPSAnJztcclxuXHJcbiAgICAvKipcclxuICAgICAqINC10YHQu9C4INGPINC90LUg0LHRg9C00YMg0LTQvtCx0LDQstC70Y/RgtGMIGlkINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQtSwg0YLQviDQvNC90LUg0L3QtdCz0LTQtSDQsdGD0LTQtdGCINCx0YDQsNGC0YxcclxuICAgICAqINC40L3RhNC+0YDQvNCw0YbQuNGOINC60L7QvNGDINC/0YDQuNC90LDQtNC70LXQttC40YIg0L3QvtCy0LDRjyDQutCw0YDRgtC+0YfQutCwLCDQsCDQtdGB0LvQuCDRjyDQvdC1INCx0YPQtNGDINC30L3QsNGC0YwgXHJcbiAgICAgKiDQutC+0LzRgyDQv9GA0LjQvdCw0LTQu9C10LbQuNGCINC90L7QstCw0Y8g0LrQsNGA0YLQvtGH0LrQsCwg0YLQviDRjyDQvdC1INCx0YPQtNGDINC30L3QsNGC0Ywg0L7RgtGA0LjRgdC+0LLRi9Cy0LDRgtGMINC70L7Qs9C+0YLQuNC/INC60L7RgNC30LjQvdGLINC40LvQuCDQvdC10YIuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IG93bmVySUQgPSB7XHJcbiAgICAgIF9pZDogXCIyOTExZDQwZWVjNDNmMDMyNmZlMzcwMWJcIlxyXG4gICAgfVxyXG4gIFxyXG4gICAgY29uc3QgdmFsdWVzRnJvbUlucHV0cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gICAgICBcIi5wb3B1cF9faW5wdXRcIlxyXG4gICAgKTtcclxuXHJcbiAgICB2YWx1ZXNGcm9tSW5wdXRzLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2VsZW1lbnQubmFtZV0gPSBlbGVtZW50LnZhbHVlOyAgICAgIFxyXG4gICAgfSk7IFxyXG4gICAgaW5wdXRWYWx1ZXMubGlrZXMgPSBlbXB0eUxpa2U7XHJcbiAgICBpbnB1dFZhbHVlcy5vd25lciA9IG93bmVySUQ7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfSBcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZXNldCgpOyAgIFxyXG4gIH1cclxuXHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBvdmVybGF5LCBoYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcixvdmVybGF5KTtcclxuICAgIHRoaXMuaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQgPSBoYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdDtcclxuICB9XHJcbiAgICBcclxuICBzZXRFdmVudExpc3RlbmVycyhjYXJkKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5oYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdChjYXJkKTtcclxuICAgIH0pOyAgXHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lRWxlbWVudCwgdXNlckRlc2NyaXB0aW9uRWxlbWVudCxhcGlQcmFrdGlrdW0pIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yTmFtZSA9IHVzZXJOYW1lRWxlbWVudDtcclxuICAgIHRoaXMuX3NlbGVjdG9yRGVzY3JpcHRpb24gPSB1c2VyRGVzY3JpcHRpb25FbGVtZW50O1xyXG4gICAgdGhpcy5hcGlQcmFrdGlrdW0gPSBhcGlQcmFrdGlrdW07XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9zZWxlY3Rvck5hbWUudGV4dENvbnRlbnQ7IFxyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLl9zZWxlY3RvckRlc2NyaXB0aW9uLnRleHRDb250ZW50OyBcclxuICAgICAgXHJcbiAgICAgY29uc3QgdXNlckRhdGEgPSB7XHJcbiAgICAgIHVzZXJOYW1lIDogbmFtZSxcclxuICAgICAgdXNlckRlc2NyaXB0aW9uIDogZGVzY3JpcHRpb24sXHJcbiAgICB9XHJcbiAgICBcclxuICByZXR1cm4gdXNlckRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9uKSB7XHJcbiAgICBjb25zdCBuYW1lSW5wdXRWYWx1ZSA9IHVzZXJOYW1lLnZhbHVlOyBcclxuICAgIGNvbnN0IGpvYklucHV0VmFsdWUgPSB1c2VyRGVzY3JpcHRpb24udmFsdWU7IFxyXG4gXHJcbiAgICB0aGlzLl9zZWxlY3Rvck5hbWUudGV4dENvbnRlbnQgPSBuYW1lSW5wdXRWYWx1ZTsgXHJcbiAgICB0aGlzLl9zZWxlY3RvckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gam9iSW5wdXRWYWx1ZTsgXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mb0Zyb21TZXJ2ZXIoKSB7XHJcbiAgICBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuYXBpUHJha3Rpa3VtLmdldFByb2ZpbGVJbmZvKClcclxuICAgIC50aGVuKChwcm9maWxlKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVJbWFnZS5zcmMgPSBwcm9maWxlLmF2YXRhcjtcclxuICAgICAgdGhpcy5fc2VsZWN0b3JOYW1lLnRleHRDb250ZW50ID0gcHJvZmlsZS5uYW1lO1xyXG4gICAgICB0aGlzLl9zZWxlY3RvckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvZmlsZS5hYm91dDtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSk7ICAgICBcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XHJcbmltcG9ydCB7Q2FyZH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7dmFsaWRhdGlvbkNvbmZpZywgb3ZlcmxheSxwb3B1cENhcmRzU2VsZWN0b3IscG9wdXBJbWFnZVNlbGVjdG9yLHBvcHVwVHJhc2hTZWxlY3RvcixcclxuICBjYXJkVGVtcGxhdGUscG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLHBvcHVwRWRpdFByb2ZpbGVQaG90b1NlbGVjdG9yLHBvcHVwT3BlblByb2ZpbGVCdXR0b24sXHJcbiAgcG9wdXBDYXJkc09wZW5CdXR0b24sY2FyZHNDb250YWluZXIsIHRleHRQcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLHByb2ZpbGVOYW1lSW5wdXQsXHJcbiAgcHJvZmlsZUpvYklucHV0LGFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQsIHByb2ZpbGVJbWFnZSxwcm9maWxlUGhvdG9Db250YWluZXJcclxufSBmcm9tIFwiLi4vc2NyaXB0cy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG4vKiog0J7QsdGA0LDQsdC+0YLRh9C40LrQuCAgKi9cclxuZnVuY3Rpb24gaGFuZGxlVHJhc2hDbGljayhjYXJkKSB7XHJcbiAgdHJhc2hQb3B1cC5vcGVuKCk7XHJcbiAgdHJhc2hQb3B1cC5zZXRFdmVudExpc3RlbmVycyhjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdFBob3RvUHJvZmlsZVN1Ym1pdChuZXdMaW5rKSB7XHJcbiAgcG9wdXBXaXRoRWRpdFBob3RvLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpUHJha3Rpa3VtLmNoYW5nZUF2YXRhcihuZXdMaW5rKVxyXG4gIC50aGVuKCgpPT57XHJcbiAgICBwcm9maWxlSW1hZ2Uuc3JjID0gbmV3TGluay5hdmF0YXI7XHJcbiAgICBwb3B1cFdpdGhFZGl0UGhvdG8uY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+e1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCk9PntcclxuICAgIHBvcHVwV2l0aEVkaXRQaG90by5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICB9KVxyXG4gIFxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCgpIHtcclxuICBcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IHtcclxuICAgIG5hbWU6IHByb2ZpbGVOYW1lSW5wdXQudmFsdWUsXHJcbiAgICBhYm91dDogcHJvZmlsZUpvYklucHV0LnZhbHVlLFxyXG4gIH07XHJcbiAgcHJvZmlsZVBvcFVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpUHJha3Rpa3VtLnNldE5ld1Byb2ZpbGUocHJvZmlsZUluZm8pXHJcbiAgLnRoZW4oKCk9PntcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVKb2JJbnB1dCk7XHJcbiAgICBwcm9maWxlUG9wVXAuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpPT57XHJcbiAgICBwcm9maWxlUG9wVXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChvYmplY3ROZXdDYXJkKSB7XHJcblxyXG4gIGNvbnN0IG5ld0VsZW1lbnQgPSBjcmVhdGVDYXJkKG9iamVjdE5ld0NhcmQpO1xyXG4gIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVByYWt0aWt1bS5wb3N0Q2FyZE9uVGhlU2VydmVyKG9iamVjdE5ld0NhcmQpXHJcbiAgLnRoZW4oKCk9PntcclxuICAgICBjYXJkc0xpc3QuYWRkSXRlbShuZXdFbGVtZW50KTtcclxuICBcclxuICAgIGFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQuY2xhc3NMaXN0LmFkZChcclxuICAgICAgdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgICApO1xyXG4gIFxyXG4gICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpPT57XHJcbiAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQoY2FyZCl7XHJcbiAgYXBpUHJha3Rpa3VtLmRlbGV0ZUNhcmQoY2FyZC5pZClcclxuICAudGhlbigoKT0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdJdCBpcyBzdWNjZXNzJyk7XHJcbiAgICBjYXJkLnJlbW92ZSgpO1xyXG4gIFxyXG4gIH0pXHJcbiAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnSXQgaXMgZXJyb3InKTtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSkgXHJcbiAgLmZpbmFsbHkoKCk9PntcclxuXHJcbiAgICB0cmFzaFBvcHVwLmNsb3NlKCk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGxpbmssIG5hbWUpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4obGluaywgbmFtZSk7XHJcbn1cclxuXHJcbi8qKiDQntCx0YrRj9Cy0LvQtdC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQvtCyINC60LvQsNGB0YHQvtCyKi9cclxuY29uc3QgYXBpUHJha3Rpa3VtID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3XCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIyYmUwZjE2OS01Yzg2LTQxODEtYjMwMy0zYjAwOWZlYmE0NjZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcFVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLFxyXG4gIG92ZXJsYXksXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IHRyYXNoUG9wdXAgPSBuZXcgUG9wdXBXaXRoRGVsZXRlKHBvcHVwVHJhc2hTZWxlY3RvcixvdmVybGF5LCBoYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdCApO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoRWRpdFBob3RvID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IsXHJcbiAgb3ZlcmxheSxcclxuICBoYW5kbGVFZGl0UGhvdG9Qcm9maWxlU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICB0ZXh0UHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIGFwaVByYWt0aWt1bVxyXG4pO1xyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmQpO1xyXG4gICAgICBjYXJkc0xpc3QuYWRkSXRlbShlbGVtZW50LHRydWUpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhcmRzQ29udGFpbmVyXHJcbik7XHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cENhcmRzU2VsZWN0b3IsIG92ZXJsYXksIGhhbmRsZUZvcm1TdWJtaXQpO1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEltYWdlU2VsZWN0b3IsIG92ZXJsYXkpO1xyXG5cclxuLyoqINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGB0LvRg9GI0LDRgtC10LvQtdC5INC90LAg0YHRgtGA0LDQvdC40YbQtSAqL1xyXG5wb3B1cFdpdGhFZGl0UGhvdG8uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZVBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlUGhvdG9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwb3B1cFdpdGhFZGl0UGhvdG8ub3BlbigpO1xyXG59KTtcclxuXHJcbnBvcHVwT3BlblByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwcm9maWxlUG9wVXAub3BlbigpO1xyXG4gIGVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvci5jbGVhclByb2ZpbGVFcnJvcnMoKTtcclxuICBjb25zdCBwcm9maWxlRGF0YUZyb21QYWdlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhRnJvbVBhZ2UudXNlck5hbWU7XHJcbiAgcHJvZmlsZUpvYklucHV0LnZhbHVlID0gcHJvZmlsZURhdGFGcm9tUGFnZS51c2VyRGVzY3JpcHRpb247XHJcbn0pO1xyXG5cclxucG9wdXBDYXJkc09wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG4gIGVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvci5jbGVhclByb2ZpbGVFcnJvcnMoKTtcclxuICBhZGRpbmdJbmFjdGl2ZUNsYXNzRm9yU3VibWl0LmNsYXNzTGlzdC5hZGQoXHJcbiAgICB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3NcclxuICApO1xyXG59KTtcclxuXHJcbnByb2ZpbGVQaG90b0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHBvcHVwV2l0aEVkaXRQaG90by5vcGVuKCk7XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZCkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkVGVtcGxhdGUsXHJcbiAgICBjYXJkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlVHJhc2hDbGljayxcclxuICAgIGFwaVByYWt0aWt1bVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkRWxlbWVudC5nZXRFbGVtZW50KCk7XHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn1cclxuLyoqINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGN0LrQt9C10LzQv9C70Y/RgNC+0LIg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDQuNC90L/Rg9GC0L7QsiAgKi9cclxuY29uc3QgZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZ1xyXG4pO1xyXG5cclxuZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvckNhcmQsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZ1xyXG4pO1xyXG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8qKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQtNCw0L3QvdGL0YUg0YEg0YHQtdGA0LLQtdGA0LAgKi9cclxuUHJvbWlzZS5hbGwoWyBcclxuICBhcGlQcmFrdGlrdW0uZ2V0SW5pdGlhbENhcmRzKCksXHJcbiAgdXNlckluZm8uZ2V0VXNlckluZm9Gcm9tU2VydmVyKClcclxuXSlcclxuLnRoZW4oKHZhbHVlcykgPT4ge1xyXG4gIGNvbnN0IFtpbml0aWFsQ2FyZHNdID0gdmFsdWVzO1xyXG4gIGNhcmRzTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xyXG59KVxyXG4uY2F0Y2goKGVycikgPT57XHJcbiAgY29uc29sZS5sb2coZXJyKTtcclxufSkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgLyoqINGC0LXQu9C+INC60L7QvdGB0YLRgNGD0LrRgtC+0YDQsCovXHJcbiAgICB0aGlzLmJhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2dldFJlc3BvbnNlRGF0YSh2YWx1ZSl7XHJcbiAgICBpZiAodmFsdWUub2spIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLmpzb24oKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHt2YWx1ZS5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRQcm9maWxlSW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgICBzZXROZXdQcm9maWxlKHByb2ZpbGVJbmZvKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocHJvZmlsZUluZm8pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIHBvc3RDYXJkT25UaGVTZXJ2ZXIobmV3Q2FyZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3Q2FyZCksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgY2hhbmdlQXZhdGFyKGxpbmspIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobGluayksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHV0TGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=
(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=e,this._cardimage=n.link,this._cardTitle=n.name,this._cardLikes=n.likes,this._cardId=n._id,this._ownerId=n.owner._id,this._handleCardClick=r,this._handleTrashClick=o,this._apiPraktikum=i,this._userId=a}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0)}},{key:"_deleteCardHandler",value:function(e){e.target.parentNode.remove()}},{key:"_setListeners",value:function(){var e=this;this._element.querySelector(".card__trash").addEventListener("click",(function(t){var n=t.target.parentNode;e._handleTrashClick(n)})),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick(e._cardimage,e._cardTitle)})),this._element.querySelector(".card__like").addEventListener("click",(function(t){t.target.classList.toggle("card__like_active");var n=t.target.parentNode,r=n.querySelector(".card__like_active"),o=n.querySelector(".card__counter-like");e._handleCountLikes(e._cardId,o,r)}))}},{key:"_toggleCounterLikes",value:function(e,t){e.textContent=t.likes.length}},{key:"_handleCountLikes",value:function(e,t,n){var r=this;null==n?this._apiPraktikum.deleteLike(e).then((function(e){r._toggleCounterLikes(t,e)})).catch((function(e){console.log(e)})):this._apiPraktikum.putLike(e).then((function(e){r._toggleCounterLikes(t,e)})).catch((function(e){console.log(e)}))}},{key:"_hideTrashIcon",value:function(e,t){var n=this._element.querySelector(".card__trash");this._ownerId!==this._userId&&(n.src="",n.alt="")}},{key:"_highlightLikes",value:function(){var e=this,t=this._element.querySelector(".card__like");this._cardLikes.find((function(n){n._id==e._userId&&t.classList.toggle("card__like_active")}))}},{key:"getElement",value:function(){this._element=this._getTemplate(),this._element.querySelector(".card").id=this._cardId;var e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__counter-like");return e.src=this._cardimage,e.alt=this._cardTitle,t.textContent=this._cardLikes.length,this._highlightLikes(),this._element.querySelector(".card__title").textContent=this._cardTitle,this._hideTrashIcon(this._ownerId,this._userId),this._setListeners(),this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=document.querySelector(t),this._object=n,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._errorClass=n.errorClass,this._inputErrorClass=n.inputErrorClass,this._formProfileInputsSelector=n.formProfileInputsSelector,this._formProfileInputsErrorsSelector=n.formProfileInputsErrorsSelector}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));r.textContent=n,r.classList.add(this._object.errorClass),t.classList.add(this._object.inputErrorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector("#".concat(t.id,"-error"));n.textContent="",n.classList.remove(this._object.errorClass),t.classList.remove(this._object.inputErrorClass)}},{key:"_getErrorMessage",value:function(e){return e.validationMessage}},{key:"_checkInputValidity",value:function(e,t){if(t.validity.valid)this._hideInputError(e,t);else{var n=this._getErrorMessage(t);this._showInputError(e,t,n)}}},{key:"_hasInValidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){t?(e.classList.add(this._object.inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._object.inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._object.inputSelector)),r=e.querySelector(this._object.submitButtonSelector);n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o);var i=t._hasInValidInput(n);t._toggleButtonState(r,i)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._formElement,this._object)}},{key:"clearProfileErrors",value:function(){var e=this,t=document.querySelectorAll(this._formProfileInputsSelector),n=document.querySelector(this._submitButtonSelector),r=document.querySelectorAll(this._formProfileInputsErrorsSelector);0!==t.length&&(t.forEach((function(t){t.classList.remove(e._inputErrorClass)})),n.classList.remove(this._inactiveButtonClass),0!==r.length&&r.forEach((function(t){t.classList.remove(e._errorClass)})))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerSelector=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e,t){var n=this;e.forEach((function(e){n._renderer(e,t)}))}},{key:"addItem",value:function(e,t){t?this._containerSelector.append(e):this._containerSelector.prepend(e)}}])&&o(t.prototype,n),e}(),a={formSelector:".popup_type_edit-user-profile",formSelectorCard:".popup_type_new-cards",formProfileInputsSelector:".popup__input_type_error",formProfileInputsErrorsSelector:".popup__input-error",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",errorClass:"popup__input-error_active",inputErrorClass:"popup__input_type_error"},c=".overlay",u=document.querySelector(".profile__name-edit"),s=document.querySelector(".profile__vector"),l=document.querySelector(".elements"),f=document.querySelector(".profile__name"),p=document.querySelector(".profile__description"),h=document.querySelector(".popup__item_profile_name"),d=document.querySelector(".popup__item_profile_job"),_=document.querySelector(".popup_cards__submit"),y=(document.querySelector(".profile__image"),document.querySelector(".profile__photo_container"));function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._overlay=document.querySelector(n)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._overlay.classList.add("overlay_visible"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this._overlay.classList.remove("overlay_visible"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){e.preventDefault(),"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close")&&e.close()})),this._overlay.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&v(t.prototype,n),e}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t))._popupImageBigImageElement=n._popupElement.querySelector(".popup__image"),n._popupCaptionImageBigImageElement=n._popupElement.querySelector(".popup__caption"),n}return t=a,(n=[{key:"open",value:function(e,t){k(w(a.prototype),"open",this).call(this),this._popupImageBigImageElement.alt=t,this._popupImageBigImageElement.src=e,this._popupCaptionImageBigImageElement.textContent=t}}])&&g(t.prototype,n),a}(m);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._handleFormSubmit=n,r}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupElement.querySelectorAll(".popup__input").forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;O(q(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){O(q(a.prototype),"close",this).call(this),this._popupElement.reset()}},{key:"renderLoading",value:function(e){this._popupElement.querySelector(".popup__submit").innerHTML=e?"Сохранение...":"Сохранить"}}])&&I(t.prototype,n),a}(m);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).handleFormWithDeleteSubmit=n,r}return t=a,(n=[{key:"setEventListeners",value:function(e){var t=this;U(x(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(n){n.preventDefault(),t.handleFormWithDeleteSubmit(e)}))}}])&&D(t.prototype,n),a}(m);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectorName=t,this._selectorDescription=n,this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._selectorName.textContent,userDescription:this._selectorDescription.textContent}}},{key:"setUserInfo",value:function(e,t){var n=e,r=t;this._selectorName.textContent=n,this._selectorDescription.textContent=r}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&V(t.prototype,n),e}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){G.open(),G.setEventListeners(e)}function W(e,t){Z.open(e,t)}var z=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setNewProfile",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"postCardOnTheServer",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers})}},{key:"putLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}}])&&F(t.prototype,n),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-19",headers:{authorization:"62377db5-e458-4bf1-a2a6-d8b8f8bb8a60","Content-Type":"application/json"}}),$=new R(".popup_type_edit-user-profile",c,(function(){var e={name:h.value,about:d.value};$.renderLoading(!0),z.setNewProfile(e).then((function(){Q.setUserInfo(e.name,e.about),$.close()})).catch((function(e){console.log(e)})).finally((function(){$.renderLoading(!1)}))})),G=new N(".popup_type_removing_card",c,(function(e){z.deleteCard(e.id).then((function(){e.remove(),G.close()})).catch((function(e){console.log(e)}))})),K=new R(".popup_type_editing_photo_profile",c,(function(e){K.renderLoading(!0),z.changeAvatar(e).then((function(){Q.setUserAvatar(e.avatar),K.close()})).catch((function(e){console.log(e)})).finally((function(){K.renderLoading(!1)}))})),Q=new M(f,p,".profile__image"),X=new i({renderer:function(e,t){var n=ee(e,t);X.addItem(n,!0)}},l),Y=new R(".popup_type_new-cards",c,(function(e){Y.renderLoading(!0),z.postCardOnTheServer(e).then((function(e){var t=ee(e,e.owner._id);X.addItem(t),_.classList.add(a.inactiveButtonClass),Y.close()})).catch((function(e){console.log(e)})).finally((function(){Y.renderLoading(!1)}))})),Z=new L(".popup_type_image",c);function ee(e,n){return new t(".card-template",e,W,J,z,n).getElement()}K.setEventListeners(),$.setEventListeners(),Y.setEventListeners(),Z.setEventListeners(),y.addEventListener("click",(function(){K.open()})),u.addEventListener("click",(function(){$.open(),te.clearProfileErrors();var e=Q.getUserInfo();h.value=e.userName,d.value=e.userDescription})),s.addEventListener("click",(function(){Y.open(),te.clearProfileErrors(),_.classList.add(a.inactiveButtonClass)})),y.addEventListener("click",(function(){K.open()}));var te=new r(a.formSelector,a);te.enableValidation(),new r(a.formSelectorCard,a).enableValidation(),Promise.all([z.getInitialCards(),z.getProfileInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a=i._id;X.renderItems(o,a),Q.setUserInfo(i.name,i.about),Q.setUserAvatar(i.avatar)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwibmFtZXMiOlsiQ2FyZCIsImNhcmRTZWxlY3RvciIsImNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiYXBpUHJha3Rpa3VtIiwidXNlcklkIiwidGhpcyIsIl9zZWxlY3RvciIsIl9jYXJkaW1hZ2UiLCJsaW5rIiwiX2NhcmRUaXRsZSIsIm5hbWUiLCJfY2FyZExpa2VzIiwibGlrZXMiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlVHJhc2hDbGljayIsIl9hcGlQcmFrdGlrdW0iLCJfdXNlcklkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2ZW50IiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInJlbW92ZSIsIl9lbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcmRDaGlsZCIsImV2dCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxpa2VzQ29udGFpbmVyIiwiaXNJdE51bGwiLCJjb3VudExpa2VzIiwiX2hhbmRsZUNvdW50TGlrZXMiLCJjb3VudGVyTGlrZXNFbGVtZW50IiwiY291bnRMaWtlc0Zyb21TZXJ2ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImNhcmRJRCIsImlzTGlrZWQiLCJkZWxldGVMaWtlIiwidGhlbiIsIl90b2dnbGVDb3VudGVyTGlrZXMiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJwdXRMaWtlIiwiY2FyZFRyYXNoSWNvbiIsInNyYyIsImFsdCIsImxpa2VCdXR0b24iLCJmaW5kIiwiaXRlbSIsIl9nZXRUZW1wbGF0ZSIsImlkIiwiY2FyZEltYWdlRWxlbWVudCIsIl9oaWdobGlnaHRMaWtlcyIsIl9oaWRlVHJhc2hJY29uIiwiX3NldExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtU2VsZWN0b3IiLCJvYmplY3QiLCJfZm9ybUVsZW1lbnQiLCJfb2JqZWN0IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Zvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yIiwiX2Zvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfZ2V0RXJyb3JNZXNzYWdlIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJpbnZhbGlkIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0luVmFsaWRJbnB1dCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBJbnB1dCIsInBvcHVwU3VibWl0IiwicG9wdXBJbnB1dEVycm9yIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsImVsZW1lbnQiLCJpc0FycmF5IiwiYXBwZW5kIiwicHJlcGVuZCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3JDYXJkIiwib3ZlcmxheSIsInBvcHVwT3BlblByb2ZpbGVCdXR0b24iLCJwb3B1cENhcmRzT3BlbkJ1dHRvbiIsImNhcmRzQ29udGFpbmVyIiwidGV4dFByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVKb2JJbnB1dCIsImFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQiLCJwcm9maWxlUGhvdG9Db250YWluZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9vdmVybGF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiY29udGFpbnMiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZUJpZ0ltYWdlRWxlbWVudCIsIl9wb3B1cENhcHRpb25JbWFnZUJpZ0ltYWdlRWxlbWVudCIsImltYWdlTGluayIsImltYWdlVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwiaW5uZXJIVE1MIiwiUG9wdXBXaXRoRGVsZXRlIiwiaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQiLCJVc2VySW5mbyIsInVzZXJOYW1lRWxlbWVudCIsInVzZXJEZXNjcmlwdGlvbkVsZW1lbnQiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfc2VsZWN0b3JOYW1lIiwiX3NlbGVjdG9yRGVzY3JpcHRpb24iLCJfYXZhdGFyIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJuYW1lSW5wdXRWYWx1ZSIsImpvYklucHV0VmFsdWUiLCJkYXRhIiwidHJhc2hQb3B1cCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsImltYWdlUG9wdXAiLCJjb25maWciLCJiYXNlVXJsIiwiaGVhZGVycyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInJlcyIsIl9nZXRSZXNwb25zZURhdGEiLCJwcm9maWxlSW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3Q2FyZCIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlUG9wVXAiLCJhYm91dCIsInJlbmRlckxvYWRpbmciLCJzZXROZXdQcm9maWxlIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImRlbGV0ZUNhcmQiLCJlcnIiLCJwb3B1cFdpdGhFZGl0UGhvdG8iLCJuZXdMaW5rIiwiY2hhbmdlQXZhdGFyIiwic2V0VXNlckF2YXRhciIsImF2YXRhciIsImNhcmRzTGlzdCIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiYWRkQ2FyZFBvcHVwIiwib2JqZWN0TmV3Q2FyZCIsInBvc3RDYXJkT25UaGVTZXJ2ZXIiLCJkYXRhQ2FyZEFmdGVyQ3JlYXRpb24iLCJuZXdFbGVtZW50IiwiZ2V0RWxlbWVudCIsImVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvciIsImNsZWFyUHJvZmlsZUVycm9ycyIsInByb2ZpbGVEYXRhRnJvbVBhZ2UiLCJnZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRQcm9maWxlSW5mbyIsInZhbHVlcyIsImluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIl0sIm1hcHBpbmdzIjoieUxBQU8sSUFBTUEsRUFBYixXQUNFLFdBQ0VDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEksNEZBQ0EsU0FDQUMsS0FBS0MsVUFBWVAsRUFDakJNLEtBQUtFLFdBQWFQLEVBQUtRLEtBQ3ZCSCxLQUFLSSxXQUFhVCxFQUFLVSxLQUN2QkwsS0FBS00sV0FBYVgsRUFBS1ksTUFDdkJQLEtBQUtRLFFBQVViLEVBQUtjLElBQ3BCVCxLQUFLVSxTQUFXZixFQUFLZ0IsTUFBTUYsSUFDM0JULEtBQUtZLGlCQUFtQmhCLEVBQ3hCSSxLQUFLYSxrQkFBb0JoQixFQUN6QkcsS0FBS2MsY0FBZ0JoQixFQUNyQkUsS0FBS2UsUUFBVWhCLEUsUUFsQm5CLE8sRUFBQSxHLEVBQUEsc0NBc0JJLE9BQU9pQixTQUFTQyxjQUFjakIsS0FBS0MsV0FBV2lCLFFBQVFDLFdBQVUsS0F0QnBFLHlDQXlCcUJDLEdBQ0NBLEVBQU1DLE9BQU9DLFdBQ3JCQyxXQTNCZCxzQ0E4QmtCLFdBQ2R2QixLQUFLd0IsU0FDRlAsY0FBYyxnQkFDZFEsaUJBQWlCLFNBQVMsU0FBQ0wsR0FDMUIsSUFBTU0sRUFBWU4sRUFBTUMsT0FBT0MsV0FDL0IsRUFBS1Qsa0JBQWtCYSxNQUczQjFCLEtBQUt3QixTQUNGUCxjQUFjLGdCQUNkUSxpQkFBaUIsU0FBUyxXQUN6QixFQUFLYixpQkFBaUIsRUFBS1YsV0FBWSxFQUFLRSxlQUdoREosS0FBS3dCLFNB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b3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgY2FyZCxcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZVRyYXNoQ2xpY2ssXHJcbiAgICBhcGlQcmFrdGlrdW0sXHJcbiAgICB1c2VySWRcclxuICApIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2FyZGltYWdlID0gY2FyZC5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gY2FyZC5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gY2FyZC5saWtlcztcclxuICAgIHRoaXMuX2NhcmRJZCA9IGNhcmQuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmQub3duZXIuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XHJcbiAgICB0aGlzLl9hcGlQcmFrdGlrdW0gPSBhcGlQcmFrdGlrdW07XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlQ2FyZEhhbmRsZXIoZXZlbnQpIHtcclxuICAgIGNvbnN0IGNhcmRDaGlsZCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgY2FyZENoaWxkLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkQ2hpbGQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrKGNhcmRDaGlsZCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmRpbWFnZSwgdGhpcy5fY2FyZFRpdGxlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xyXG4gICAgICAgIGNvbnN0IGxpa2VzQ29udGFpbmVyID0gZXZ0LnRhcmdldC5wYXJlbnROb2RlO1xyXG4gICAgICAgIGNvbnN0IGlzSXROdWxsID0gbGlrZXNDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgY291bnRMaWtlcyA9IGxpa2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fY291bnRlci1saWtlXCIpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNvdW50TGlrZXModGhpcy5fY2FyZElkLCBjb3VudExpa2VzLCBpc0l0TnVsbCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUNvdW50ZXJMaWtlcyhjb3VudGVyTGlrZXNFbGVtZW50LCBjb3VudExpa2VzRnJvbVNlcnZlcikge1xyXG4gICAgY291bnRlckxpa2VzRWxlbWVudC50ZXh0Q29udGVudCA9IGNvdW50TGlrZXNGcm9tU2VydmVyLmxpa2VzLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDb3VudExpa2VzKGNhcmRJRCwgY291bnRlckxpa2VzRWxlbWVudCwgaXNMaWtlZCkge1xyXG4gICAgaWYgKGlzTGlrZWQgPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBwcm9taXNlRGVsZXRlTGlrZXMgPSB0aGlzLl9hcGlQcmFrdGlrdW0uZGVsZXRlTGlrZShjYXJkSUQpO1xyXG4gICAgICBwcm9taXNlRGVsZXRlTGlrZXNcclxuICAgICAgICAudGhlbigoY291bnRMaWtlc0Zyb21TZXJ2ZXIpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZUNvdW50ZXJMaWtlcyhjb3VudGVyTGlrZXNFbGVtZW50LCBjb3VudExpa2VzRnJvbVNlcnZlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBwcm9taXNlTGlrZXMgPSB0aGlzLl9hcGlQcmFrdGlrdW0ucHV0TGlrZShjYXJkSUQpO1xyXG4gICAgICBwcm9taXNlTGlrZXNcclxuICAgICAgICAudGhlbigoY291bnRMaWtlc0Zyb21TZXJ2ZXIpID0+IHtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZUNvdW50ZXJMaWtlcyhjb3VudGVyTGlrZXNFbGVtZW50LCBjb3VudExpa2VzRnJvbVNlcnZlcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGlkZVRyYXNoSWNvbihfb3duZXJJZCwgX3VzZXJJZCkge1xyXG4gICAgY29uc3QgY2FyZFRyYXNoSWNvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaFwiKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIGNhcmRUcmFzaEljb24uc3JjID0gXCJcIjtcclxuICAgICAgY2FyZFRyYXNoSWNvbi5hbHQgPSBcIlwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hpZ2hsaWdodExpa2VzKCkge1xyXG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzLmZpbmQoKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKGl0ZW0uX2lkID09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldEVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIGNvbnN0IGNhcmRJRCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xyXG4gICAgY2FyZElELmlkID0gdGhpcy5fY2FyZElkO1xyXG4gICAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IGNvdW50ZXJMaWtlc0VsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2NvdW50ZXItbGlrZVwiXHJcbiAgICApO1xyXG5cclxuICAgIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fY2FyZGltYWdlO1xyXG4gICAgY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9jYXJkVGl0bGU7XHJcbiAgICBjb3VudGVyTGlrZXNFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fY2FyZExpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9oaWdobGlnaHRMaWtlcygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZFRpdGxlO1xyXG5cclxuICAgIHRoaXMuX2hpZGVUcmFzaEljb24odGhpcy5fb3duZXJJZCwgdGhpcy5fdXNlcklkKTtcclxuXHJcbiAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZvcm1TZWxlY3Rvciwgb2JqZWN0KSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX29iamVjdCA9IG9iamVjdDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBvYmplY3QuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb2JqZWN0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IG9iamVjdC5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IG9iamVjdC5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gb2JqZWN0LmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IgPSBvYmplY3QuZm9ybVByb2ZpbGVJbnB1dHNTZWxlY3RvcjtcclxuICAgIHRoaXMuX2Zvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3IgPSBvYmplY3QuZm9ybVByb2ZpbGVJbnB1dHNFcnJvcnNTZWxlY3RvcjtcclxuICB9XHJcbiAgXHJcbiAgLyoqICDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0LTQvtCx0LDQstC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LkgKi9cclxuICBfc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb2JqZWN0LmVycm9yQ2xhc3MpO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29iamVjdC5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLyoqICDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0YPQtNCw0LvRj9C10YIg0LrQu9Cw0YHRgSDRgSDQvtGI0LjQsdC60L7QuSAqL1xyXG4gIF9oaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29iamVjdC5lcnJvckNsYXNzKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9nZXRFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KSB7XHJcbiAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgLyoqINCk0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQv9GA0L7QstC10YDRj9C10YIg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y8gKi9cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGlzSW5wdXROb3RWYWxpZCA9ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcblxyXG4gICAgaWYgKGlzSW5wdXROb3RWYWxpZCkge1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9nZXRFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KTtcclxuICAgICAgLyoqICDQldGB0LvQuCDQv9C+0LvQtSDQvdC1INC/0YDQvtGF0L7QtNC40YIg0LLQsNC70LjQtNCw0YbQuNGOLCDQv9C+0LrQsNC20LXQvCDQvtGI0LjQsdC60YMgKi9cclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8qKiAg0JXRgdC70Lgg0L/RgNC+0YXQvtC00LjRgiwg0YHQutGA0L7QtdC8ICovXHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0luVmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIGNvbnN0IHZhbGlkID0gaW5wdXRMaXN0LnNvbWUoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgICByZXR1cm4gdmFsaWQ7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uRWxlbWVudCwgaW52YWxpZCkge1xyXG4gICAgaWYgKGludmFsaWQpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29iamVjdC5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb2JqZWN0LmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG5cclxuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9vYmplY3QuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fb2JqZWN0LnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IGludmFsaWQgPSB0aGlzLl9oYXNJblZhbGlkSW5wdXQoaW5wdXRMaXN0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShidXR0b25FbGVtZW50LCBpbnZhbGlkKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyh0aGlzLl9mb3JtRWxlbWVudCwgdGhpcy5fb2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGNsZWFyUHJvZmlsZUVycm9ycygpIHtcclxuICAgIGNvbnN0IHBvcHVwSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IpO1xyXG4gICAgY29uc3QgcG9wdXBTdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIGNvbnN0IHBvcHVwSW5wdXRFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9ybVByb2ZpbGVJbnB1dHNFcnJvcnNTZWxlY3Rvcik7XHJcbiAgICBpZiAocG9wdXBJbnB1dC5sZW5ndGggIT09IDApIHtcclxuICAgICAgcG9wdXBJbnB1dC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBwb3B1cFN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBpZiAocG9wdXBJbnB1dEVycm9yLmxlbmd0aCAhPT0gMCkge1xyXG4gICAgICAgIHBvcHVwSW5wdXRFcnJvci5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59IiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXJTZWxlY3RvciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMsdXNlcklkKSB7XHJcbiAgICBpdGVtcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGNhcmQsdXNlcklkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50LCBpc0FycmF5KSB7XHJcbiAgICBpZiAoaXNBcnJheSkge1xyXG4gICAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX3R5cGVfZWRpdC11c2VyLXByb2ZpbGVcIixcclxuICBmb3JtU2VsZWN0b3JDYXJkOiBcIi5wb3B1cF90eXBlX25ldy1jYXJkc1wiLFxyXG4gIGZvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IgOiBcIi5wb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGZvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3I6XCIucG9wdXBfX2lucHV0LWVycm9yXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXRcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXRfaW5hY3RpdmVcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIiwgXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgb3ZlcmxheSA9IFwiLm92ZXJsYXlcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZHNTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfbmV3LWNhcmRzXCI7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2ltYWdlXCI7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFRyYXNoU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX3JlbW92aW5nX2NhcmRcIjtcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IFwiLmNhcmQtdGVtcGxhdGVcIjtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZVNlbGVjdG9yID0gKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9lZGl0LXVzZXItcHJvZmlsZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX2VkaXRpbmdfcGhvdG9fcHJvZmlsZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBPcGVuUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZS1lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkc09wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3ZlY3RvclwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcclxuZXhwb3J0IGNvbnN0IHRleHRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faXRlbV9wcm9maWxlX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pdGVtX3Byb2ZpbGVfam9iXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfY2FyZHNfX3N1Ym1pdFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGhvdG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3Bob3RvX2NvbnRhaW5lclwiKTtcclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLG92ZXJsYXkpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9vdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvdmVybGF5KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX292ZXJsYXkuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXlfdmlzaWJsZVwiKTtcclxuICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIHRoaXMuX292ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXlfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9IFxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHsgXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT57XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpKSB7XHJcbiAgIFxyXG4gICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgfSAgXHJcbiAgICB9ICk7XHJcbiAgICB0aGlzLl9vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHsgXHJcbiAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHsgXHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9IFxyXG4gICAgfSk7IFxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcixvdmVybGF5KXtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3Isb3ZlcmxheSlcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VCaWdJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb25JbWFnZUJpZ0ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpbWFnZUxpbmssIGltYWdlVGl0bGUpIHtcclxuICAgIC8qKiDQstGL0LfRi9Cy0LDQtdC8INGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQvNC10YLQvtC0ICovXHJcbiAgICBzdXBlci5vcGVuKCk7IFxyXG5cclxuICAgIC8qKiDQtNC+0L/QvtC70L3QuNC8IG9wZW4g0L3QvtCy0L7QuSDRhNGD0L3QutGG0LjQvtC90LDQu9GM0L3QvtGB0YLRjNGOICovXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlQmlnSW1hZ2VFbGVtZW50LmFsdCA9IGltYWdlVGl0bGU7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlQmlnSW1hZ2VFbGVtZW50LnNyYyA9IGltYWdlTGluaztcclxuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbkltYWdlQmlnSW1hZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW1hZ2VUaXRsZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Isb3ZlcmxheSxoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yLG92ZXJsYXkpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICBcclxuICAgIGNvbnN0IHZhbHVlc0Zyb21JbnB1dHMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICAgICAgXCIucG9wdXBfX2lucHV0XCJcclxuICAgICk7XHJcblxyXG4gICAgdmFsdWVzRnJvbUlucHV0cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tlbGVtZW50Lm5hbWVdID0gZWxlbWVudC52YWx1ZTsgICAgICBcclxuICAgIH0pOyBcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9IFxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlc2V0KCk7ICAgXHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZyl7XHJcbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQnKTtcclxuICAgICAgaWYgKGlzTG9hZGluZyl7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmlubmVySFRNTCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmlubmVySFRNTCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnO1xyXG4gICAgICB9ICAgXHJcbiAgIH07XHJcblxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgb3ZlcmxheSwgaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3Isb3ZlcmxheSk7XHJcbiAgICB0aGlzLmhhbmRsZUZvcm1XaXRoRGVsZXRlU3VibWl0ID0gaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQ7XHJcbiAgfVxyXG4gICAgXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoY2FyZCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQoY2FyZCk7XHJcbiAgICB9KTsgIFxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZUVsZW1lbnQsIHVzZXJEZXNjcmlwdGlvbkVsZW1lbnQsdXNlckF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9zZWxlY3Rvck5hbWUgPSB1c2VyTmFtZUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9zZWxlY3RvckRlc2NyaXB0aW9uID0gdXNlckRlc2NyaXB0aW9uRWxlbWVudDtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgbmFtZSA9IHRoaXMuX3NlbGVjdG9yTmFtZS50ZXh0Q29udGVudDsgXHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMuX3NlbGVjdG9yRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7IFxyXG4gICAgICBcclxuICAgICBjb25zdCB1c2VyRGF0YSA9IHtcclxuICAgICAgdXNlck5hbWUgOiBuYW1lLFxyXG4gICAgICB1c2VyRGVzY3JpcHRpb24gOiBkZXNjcmlwdGlvbixcclxuICAgIH1cclxuICAgIFxyXG4gIHJldHVybiB1c2VyRGF0YTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJOYW1lLCB1c2VyRGVzY3JpcHRpb24pIHtcclxuICAgIGNvbnN0IG5hbWVJbnB1dFZhbHVlID0gdXNlck5hbWU7IFxyXG4gICAgY29uc3Qgam9iSW5wdXRWYWx1ZSA9IHVzZXJEZXNjcmlwdGlvbjsgXHJcbiBcclxuICAgIHRoaXMuX3NlbGVjdG9yTmFtZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dFZhbHVlOyBcclxuICAgIHRoaXMuX3NlbGVjdG9yRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBqb2JJbnB1dFZhbHVlOyBcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoZGF0YSl7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gZGF0YTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XHJcbmltcG9ydCB7Q2FyZH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQge0Zvcm1WYWxpZGF0b3J9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHtTZWN0aW9ufSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7dmFsaWRhdGlvbkNvbmZpZywgb3ZlcmxheSxwb3B1cENhcmRzU2VsZWN0b3IscG9wdXBJbWFnZVNlbGVjdG9yLHBvcHVwVHJhc2hTZWxlY3RvcixcclxuICBjYXJkVGVtcGxhdGUsIHByb2ZpbGVJbWFnZVNlbGVjdG9yLCBwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IscG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IscG9wdXBPcGVuUHJvZmlsZUJ1dHRvbixcclxuICBwb3B1cENhcmRzT3BlbkJ1dHRvbixjYXJkc0NvbnRhaW5lciwgdGV4dFByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24scHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlSm9iSW5wdXQsYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdCwgcHJvZmlsZUltYWdlLHByb2ZpbGVQaG90b0NvbnRhaW5lclxyXG59IGZyb20gXCIuLi9zY3JpcHRzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aERlbGV0ZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbi8qKiDQntCx0YDQsNCx0L7RgtGH0LjQutC4ICAqL1xyXG5mdW5jdGlvbiBoYW5kbGVUcmFzaENsaWNrKGNhcmQpIHtcclxuICB0cmFzaFBvcHVwLm9wZW4oKTtcclxuICB0cmFzaFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0UGhvdG9Qcm9maWxlU3VibWl0KG5ld0xpbmspIHtcclxuICBwb3B1cFdpdGhFZGl0UGhvdG8ucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlQcmFrdGlrdW0uY2hhbmdlQXZhdGFyKG5ld0xpbmspXHJcbiAgLnRoZW4oKCk9PntcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIobmV3TGluay5hdmF0YXIpO1xyXG4gICAgcG9wdXBXaXRoRWRpdFBob3RvLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PntcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpPT57XHJcbiAgICBwb3B1cFdpdGhFZGl0UGhvdG8ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSlcclxuICBcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoKSB7XHJcbiAgXHJcbiAgY29uc3QgcHJvZmlsZUluZm8gPSB7XHJcbiAgICBuYW1lOiBwcm9maWxlTmFtZUlucHV0LnZhbHVlLFxyXG4gICAgYWJvdXQ6IHByb2ZpbGVKb2JJbnB1dC52YWx1ZSxcclxuICB9O1xyXG4gIHByb2ZpbGVQb3BVcC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVByYWt0aWt1bS5zZXROZXdQcm9maWxlKHByb2ZpbGVJbmZvKVxyXG4gIC50aGVuKCgpPT57XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhwcm9maWxlSW5mby5uYW1lLCBwcm9maWxlSW5mby5hYm91dCk7XHJcbiAgICBwcm9maWxlUG9wVXAuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpPT57XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKT0+e1xyXG4gICAgcHJvZmlsZVBvcFVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUZvcm1TdWJtaXQob2JqZWN0TmV3Q2FyZCkge1xyXG4gIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVByYWt0aWt1bS5wb3N0Q2FyZE9uVGhlU2VydmVyKG9iamVjdE5ld0NhcmQpXHJcbiAgLnRoZW4oKGRhdGFDYXJkQWZ0ZXJDcmVhdGlvbik9PntcclxuIFxyXG4gICAgY29uc3QgbmV3RWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YUNhcmRBZnRlckNyZWF0aW9uLGRhdGFDYXJkQWZ0ZXJDcmVhdGlvbi5vd25lci5faWQpO1xyXG4gICAgIGNhcmRzTGlzdC5hZGRJdGVtKG5ld0VsZW1lbnQpO1xyXG4gIFxyXG4gICAgYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICB2YWxpZGF0aW9uQ29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3NcclxuICAgICk7XHJcbiAgXHJcbiAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcik9PntcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpPT57XHJcbiAgICBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQoY2FyZCl7XHJcbiAgYXBpUHJha3Rpa3VtLmRlbGV0ZUNhcmQoY2FyZC5pZClcclxuICAudGhlbigoKT0+IHtcclxuICAgIGNhcmQucmVtb3ZlKCk7XHJcbiAgICB0cmFzaFBvcHVwLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSkgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhsaW5rLCBuYW1lKSB7XHJcbiAgaW1hZ2VQb3B1cC5vcGVuKGxpbmssIG5hbWUpO1xyXG59XHJcblxyXG4vKiog0J7QsdGK0Y/QstC70LXQvdC40LUg0Y3QutC30LXQvNC/0LvRj9GA0L7QsiDQutC70LDRgdGB0L7QsiovXHJcbmNvbnN0IGFwaVByYWt0aWt1bSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xOVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiNjIzNzdkYjUtZTQ1OC00YmYxLWEyYTYtZDhiOGY4YmI4YTYwXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3BVcCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvcixcclxuICBvdmVybGF5LFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCB0cmFzaFBvcHVwID0gbmV3IFBvcHVwV2l0aERlbGV0ZShwb3B1cFRyYXNoU2VsZWN0b3Isb3ZlcmxheSwgaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQgKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEVkaXRQaG90byA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHBvcHVwRWRpdFByb2ZpbGVQaG90b1NlbGVjdG9yLFxyXG4gIG92ZXJsYXksXHJcbiAgaGFuZGxlRWRpdFBob3RvUHJvZmlsZVN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXHJcbiAgdGV4dFByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcclxuICBwcm9maWxlSW1hZ2VTZWxlY3RvclxyXG4pO1xyXG5cclxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChjYXJkLHVzZXJJZCkgPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkLHVzZXJJZCk7XHJcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGVsZW1lbnQsdHJ1ZSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY2FyZHNDb250YWluZXJcclxuKTtcclxuXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQ2FyZHNTZWxlY3Rvciwgb3ZlcmxheSwgaGFuZGxlRm9ybVN1Ym1pdCk7XHJcblxyXG5jb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2VTZWxlY3Rvciwgb3ZlcmxheSk7XHJcblxyXG4vKiog0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0YHQu9GD0YjQsNGC0LXQu9C10Lkg0L3QsCDRgdGC0YDQsNC90LjRhtC1ICovXHJcbnBvcHVwV2l0aEVkaXRQaG90by5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wcm9maWxlUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVQaG90b0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHBvcHVwV2l0aEVkaXRQaG90by5vcGVuKCk7XHJcbn0pO1xyXG5cclxucG9wdXBPcGVuUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHByb2ZpbGVQb3BVcC5vcGVuKCk7XHJcbiAgZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yLmNsZWFyUHJvZmlsZUVycm9ycygpO1xyXG4gIGNvbnN0IHByb2ZpbGVEYXRhRnJvbVBhZ2UgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZURhdGFGcm9tUGFnZS51c2VyTmFtZTtcclxuICBwcm9maWxlSm9iSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YUZyb21QYWdlLnVzZXJEZXNjcmlwdGlvbjtcclxufSk7XHJcblxyXG5wb3B1cENhcmRzT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yLmNsZWFyUHJvZmlsZUVycm9ycygpO1xyXG4gIGFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQuY2xhc3NMaXN0LmFkZChcclxuICAgIHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzc1xyXG4gICk7XHJcbn0pO1xyXG5cclxucHJvZmlsZVBob3RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgcG9wdXBXaXRoRWRpdFBob3RvLm9wZW4oKTtcclxufSk7XHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkLHVzZXJJZCkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBjYXJkVGVtcGxhdGUsXHJcbiAgICBjYXJkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlVHJhc2hDbGljayxcclxuICAgIGFwaVByYWt0aWt1bSxcclxuICAgIHVzZXJJZFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkRWxlbWVudC5nZXRFbGVtZW50KCk7XHJcbiAgcmV0dXJuIGVsZW1lbnQ7XHJcbn1cclxuLyoqINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINGN0LrQt9C10LzQv9C70Y/RgNC+0LIg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDQuNC90L/Rg9GC0L7QsiAgKi9cclxuY29uc3QgZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvbkNvbmZpZy5mb3JtU2VsZWN0b3IsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZ1xyXG4pO1xyXG5cclxuZWRpdFVzZXJQcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvckNhcmQsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZ1xyXG4pO1xyXG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8qKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQtNCw0L3QvdGL0YUg0YEg0YHQtdGA0LLQtdGA0LAgKi9cclxuUHJvbWlzZS5hbGwoWyBcclxuICBhcGlQcmFrdGlrdW0uZ2V0SW5pdGlhbENhcmRzKCksXHJcbiAgYXBpUHJha3Rpa3VtLmdldFByb2ZpbGVJbmZvKClcclxuXSlcclxuLnRoZW4oKHZhbHVlcykgPT4ge1xyXG4gIGNvbnN0IFtpbml0aWFsQ2FyZHMscHJvZmlsZUluZm9dID0gdmFsdWVzO1xyXG4gIGNvbnN0IHVzZXJJZCA9IHByb2ZpbGVJbmZvLl9pZDtcclxuXHJcbiAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyx1c2VySWQpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVJbmZvLm5hbWUscHJvZmlsZUluZm8uYWJvdXQpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocHJvZmlsZUluZm8uYXZhdGFyKTtcclxufSlcclxuLmNhdGNoKChlcnIpID0+e1xyXG4gIGNvbnNvbGUubG9nKGVycik7XHJcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIC8qKiDRgtC10LvQviDQutC+0L3RgdGC0YDRg9C60YLQvtGA0LAqL1xyXG4gICAgdGhpcy5iYXNlVXJsID0gY29uZmlnLmJhc2VVcmw7XHJcbiAgICB0aGlzLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9nZXRSZXNwb25zZURhdGEodmFsdWUpe1xyXG4gICAgaWYgKHZhbHVlLm9rKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS5qc29uKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7dmFsdWUuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gICAgc2V0TmV3UHJvZmlsZShwcm9maWxlSW5mbykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHByb2ZpbGVJbmZvKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICBwb3N0Q2FyZE9uVGhlU2VydmVyKG5ld0NhcmQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld0NhcmQpLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGNoYW5nZUF2YXRhcihsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGxpbmspLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1dExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9
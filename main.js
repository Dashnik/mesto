(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=e,this._cardimage=n.link,this._cardTitle=n.name,this._cardLikes=n.likes,this._cardId=n._id,this._ownerId=n.owner._id,this._handleCardClick=r,this._handleTrashClick=o,this._apiPraktikum=i,this._userId=a}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0)}},{key:"_deleteCardHandler",value:function(e){e.target.parentNode.remove()}},{key:"_setListeners",value:function(){var e=this;this._element.querySelector(".card__trash").addEventListener("click",(function(t){var n=t.target.parentNode;e._handleTrashClick(n)})),this._element.querySelector(".card__image").addEventListener("click",(function(){e._handleCardClick(e._cardimage,e._cardTitle)})),this._element.querySelector(".card__like").addEventListener("click",(function(t){t.target.classList.toggle("card__like_active");var n=t.target.parentNode,r=n.querySelector(".card__like_active"),o=n.querySelector(".card__counter-like");e._handleCountLikes(e._cardId,o,r)}))}},{key:"_toggleCounterLikes",value:function(e,t){e.textContent=t.likes.length}},{key:"_handleCountLikes",value:function(e,t,n){var r=this;null==n?this._apiPraktikum.deleteLike(e).then((function(e){r._toggleCounterLikes(t,e)})).catch((function(e){console.log(e)})):this._apiPraktikum.putLike(e).then((function(e){r._toggleCounterLikes(t,e)})).catch((function(e){console.log(e)}))}},{key:"_hideTrashIcon",value:function(e,t){var n=this._element.querySelector(".card__trash");this._ownerId!==this._userId&&(n.src="",n.alt="")}},{key:"_highlightLikes",value:function(){var e=this,t=this._element.querySelector(".card__like");this._cardLikes.find((function(n){n._id==e._userId&&t.classList.toggle("card__like_active")}))}},{key:"getElement",value:function(){this._element=this._getTemplate(),this._element.querySelector(".card").id=this._cardId;var e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__counter-like");return e.src=this._cardimage,e.alt=this._cardTitle,t.textContent=this._cardLikes.length,this._highlightLikes(),this._element.querySelector(".card__title").textContent=this._cardTitle,this._hideTrashIcon(this._ownerId,this._userId),this._setListeners(),this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=document.querySelector(t),this._object=n,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._errorClass=n.errorClass,this._inputErrorClass=n.inputErrorClass,this._formProfileInputsSelector=n.formProfileInputsSelector,this._formProfileInputsErrorsSelector=n.formProfileInputsErrorsSelector}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t,n){var r=e.querySelector("#".concat(t.id,"-error"));r.textContent=n,r.classList.add(this._object.errorClass),t.classList.add(this._object.inputErrorClass)}},{key:"_hideInputError",value:function(e,t){var n=e.querySelector("#".concat(t.id,"-error"));n.textContent="",n.classList.remove(this._object.errorClass),t.classList.remove(this._object.inputErrorClass)}},{key:"_getErrorMessage",value:function(e){return e.validationMessage}},{key:"_checkInputValidity",value:function(e,t){if(t.validity.valid)this._hideInputError(e,t);else{var n=this._getErrorMessage(t);this._showInputError(e,t,n)}}},{key:"_hasInValidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){t?(e.classList.add(this._object.inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._object.inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._object.inputSelector)),r=e.querySelector(this._object.submitButtonSelector);n.forEach((function(o){o.addEventListener("input",(function(){t._checkInputValidity(e,o);var i=t._hasInValidInput(n);t._toggleButtonState(r,i)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners(this._formElement,this._object)}},{key:"clearProfileErrors",value:function(){var e=this,t=document.querySelectorAll(this._formProfileInputsSelector),n=document.querySelector(this._submitButtonSelector),r=document.querySelectorAll(this._formProfileInputsErrorsSelector);0!==t.length&&(t.forEach((function(t){t.classList.remove(e._inputErrorClass)})),n.classList.remove(this._inactiveButtonClass),0!==r.length&&r.forEach((function(t){t.classList.remove(e._errorClass)})))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerSelector=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e,t){var n=this;e.forEach((function(e){n._renderer(e,t)}))}},{key:"addItem",value:function(e,t){t?this._containerSelector.append(e):this._containerSelector.prepend(e)}}])&&o(t.prototype,n),e}(),a={formSelector:".popup_type_edit-user-profile",formSelectorCard:".popup_type_new-cards",formProfileInputsSelector:".popup__input_type_error",formProfileInputsErrorsSelector:".popup__input-error",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_inactive",errorClass:"popup__input-error_active",inputErrorClass:"popup__input_type_error"},c=".overlay",u=document.querySelector(".profile__name-edit"),s=document.querySelector(".profile__vector"),l=document.querySelector(".elements"),f=document.querySelector(".profile__name"),p=document.querySelector(".profile__description"),h=document.querySelector(".popup__item_profile_name"),d=document.querySelector(".popup__item_profile_job"),_=document.querySelector(".popup_cards__submit"),y=(document.querySelector(".profile__image"),document.querySelector(".profile__photo_container"));function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._overlay=document.querySelector(n)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._overlay.classList.add("overlay_visible"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this._overlay.classList.remove("overlay_visible"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){e.preventDefault(),"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close")&&e.close()})),this._overlay.addEventListener("click",(function(t){t.target===t.currentTarget&&e.close()}))}}])&&v(t.prototype,n),e}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e,t))._popupImageBigImageElement=n._popupElement.querySelector(".popup__image"),n._popupCaptionImageBigImageElement=n._popupElement.querySelector(".popup__caption"),n}return t=a,(n=[{key:"open",value:function(e,t){k(w(a.prototype),"open",this).call(this),this._popupImageBigImageElement.alt=t,this._popupImageBigImageElement.src=e,this._popupCaptionImageBigImageElement.textContent=t}}])&&g(t.prototype,n),a}(m);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t))._handleFormSubmit=n,r}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._popupElement.querySelectorAll(".popup__input").forEach((function(t){e[t.name]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;O(q(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){O(q(a.prototype),"close",this).call(this),this._popupElement.reset()}},{key:"renderLoading",value:function(e){this._popupElement.querySelector(".popup__submit").innerHTML=e?"Сохранение...":"Сохранить"}}])&&I(t.prototype,n),a}(m);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).handleFormWithDeleteSubmit=n,r}return t=a,(n=[{key:"setEventListeners",value:function(e){var t=this;U(x(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(n){n.preventDefault(),t.handleFormWithDeleteSubmit(e)}))}}])&&D(t.prototype,n),a}(m);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectorName=t,this._selectorDescription=n,this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._selectorName.textContent,userDescription:this._selectorDescription.textContent}}},{key:"setUserInfo",value:function(e,t){var n=e,r=t;this._selectorName.textContent=n,this._selectorDescription.textContent=r}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&V(t.prototype,n),e}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e){G.open(),G.setEventListeners(e)}function W(e,t){Z.open(e,t)}var z=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setNewProfile",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"postCardOnTheServer",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify(e)}).then((function(e){return t._getResponseData(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers})}},{key:"putLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return t._getResponseData(e)})).then((function(e){return e}))}}])&&F(t.prototype,n),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"2be0f169-5c86-4181-b303-3b009feba466","Content-Type":"application/json"}}),$=new R(".popup_type_edit-user-profile",c,(function(){var e={name:h.value,about:d.value};$.renderLoading(!0),z.setNewProfile(e).then((function(){Q.setUserInfo(h,d),$.close()})).catch((function(e){console.log(e)})).finally((function(){$.renderLoading(!1)}))})),G=new N(".popup_type_removing_card",c,(function(e){z.deleteCard(e.id).then((function(){e.remove(),G.close()})).catch((function(e){console.log(e)}))})),K=new R(".popup_type_editing_photo_profile",c,(function(e){K.renderLoading(!0),z.changeAvatar(e).then((function(){Q.setUserAvatar(e.avatar),K.close()})).catch((function(e){console.log(e)})).finally((function(){K.renderLoading(!1)}))})),Q=new M(f,p,".profile__image"),X=new i({renderer:function(e,t){var n=ee(e,t);X.addItem(n,!0)}},l),Y=new R(".popup_type_new-cards",c,(function(e){Y.renderLoading(!0),z.postCardOnTheServer(e).then((function(e){var t=ee(e,e.owner._id);X.addItem(t),_.classList.add(a.inactiveButtonClass),Y.close()})).catch((function(e){console.log(e)})).finally((function(){Y.renderLoading(!1)}))})),Z=new L(".popup_type_image",c);function ee(e,n){return new t(".card-template",e,W,J,z,n).getElement()}K.setEventListeners(),$.setEventListeners(),Y.setEventListeners(),Z.setEventListeners(),y.addEventListener("click",(function(){K.open()})),u.addEventListener("click",(function(){$.open(),te.clearProfileErrors();var e=Q.getUserInfo();h.value=e.userName,d.value=e.userDescription})),s.addEventListener("click",(function(){Y.open(),te.clearProfileErrors(),_.classList.add(a.inactiveButtonClass)})),y.addEventListener("click",(function(){K.open()}));var te=new r(a.formSelector,a);te.enableValidation(),new r(a.formSelectorCard,a).enableValidation(),Promise.all([z.getInitialCards(),z.getProfileInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a=i._id;X.renderItems(o,a),Q.setUserInfo(i.name,i.about),Q.setUserAvatar(i.avatar)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwibmFtZXMiOlsiQ2FyZCIsImNhcmRTZWxlY3RvciIsImNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiYXBpUHJha3Rpa3VtIiwidXNlcklkIiwidGhpcyIsIl9zZWxlY3RvciIsIl9jYXJkaW1hZ2UiLCJsaW5rIiwiX2NhcmRUaXRsZSIsIm5hbWUiLCJfY2FyZExpa2VzIiwibGlrZXMiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlVHJhc2hDbGljayIsIl9hcGlQcmFrdGlrdW0iLCJfdXNlcklkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2ZW50IiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsInJlbW92ZSIsIl9lbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhcmRDaGlsZCIsImV2dCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImxpa2VzQ29udGFpbmVyIiwiaXNJdE51bGwiLCJjb3VudExpa2VzIiwiX2hhbmRsZUNvdW50TGlrZXMiLCJjb3VudGVyTGlrZXNFbGVtZW50IiwiY291bnRMaWtlc0Zyb21TZXJ2ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImNhcmRJRCIsImlzTGlrZWQiLCJkZWxldGVMaWtlIiwidGhlbiIsIl90b2dnbGVDb3VudGVyTGlrZXMiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJwdXRMaWtlIiwiY2FyZFRyYXNoSWNvbiIsInNyYyIsImFsdCIsImxpa2VCdXR0b24iLCJmaW5kIiwiaXRlbSIsIl9nZXRUZW1wbGF0ZSIsImlkIiwiY2FyZEltYWdlRWxlbWVudCIsIl9oaWdobGlnaHRMaWtlcyIsIl9oaWRlVHJhc2hJY29uIiwiX3NldExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtU2VsZWN0b3IiLCJvYmplY3QiLCJfZm9ybUVsZW1lbnQiLCJfb2JqZWN0IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Zvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yIiwiX2Zvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3IiLCJmb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfZ2V0RXJyb3JNZXNzYWdlIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJpbnZhbGlkIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0luVmFsaWRJbnB1dCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBJbnB1dCIsInBvcHVwU3VibWl0IiwicG9wdXBJbnB1dEVycm9yIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsImVsZW1lbnQiLCJpc0FycmF5IiwiYXBwZW5kIiwicHJlcGVuZCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3JDYXJkIiwib3ZlcmxheSIsInBvcHVwT3BlblByb2ZpbGVCdXR0b24iLCJwb3B1cENhcmRzT3BlbkJ1dHRvbiIsImNhcmRzQ29udGFpbmVyIiwidGV4dFByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVKb2JJbnB1dCIsImFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQiLCJwcm9maWxlUGhvdG9Db250YWluZXIiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9vdmVybGF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiY29udGFpbnMiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZUJpZ0ltYWdlRWxlbWVudCIsIl9wb3B1cENhcHRpb25JbWFnZUJpZ0ltYWdlRWxlbWVudCIsImltYWdlTGluayIsImltYWdlVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaXNMb2FkaW5nIiwiaW5uZXJIVE1MIiwiUG9wdXBXaXRoRGVsZXRlIiwiaGFuZGxlRm9ybVdpdGhEZWxldGVTdWJtaXQiLCJVc2VySW5mbyIsInVzZXJOYW1lRWxlbWVudCIsInVzZXJEZXNjcmlwdGlvbkVsZW1lbnQiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfc2VsZWN0b3JOYW1lIiwiX3NlbGVjdG9yRGVzY3JpcHRpb24iLCJfYXZhdGFyIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJuYW1lSW5wdXRWYWx1ZSIsImpvYklucHV0VmFsdWUiLCJkYXRhIiwidHJhc2hQb3B1cCIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsImltYWdlUG9wdXAiLCJjb25maWciLCJiYXNlVXJsIiwiaGVhZGVycyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsInJlcyIsIl9nZXRSZXNwb25zZURhdGEiLCJwcm9maWxlSW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3Q2FyZCIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlUG9wVXAiLCJhYm91dCIsInJlbmRlckxvYWRpbmciLCJzZXROZXdQcm9maWxlIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImRlbGV0ZUNhcmQiLCJlcnIiLCJwb3B1cFdpdGhFZGl0UGhvdG8iLCJuZXdMaW5rIiwiY2hhbmdlQXZhdGFyIiwic2V0VXNlckF2YXRhciIsImF2YXRhciIsImNhcmRzTGlzdCIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiYWRkQ2FyZFBvcHVwIiwib2JqZWN0TmV3Q2FyZCIsInBvc3RDYXJkT25UaGVTZXJ2ZXIiLCJkYXRhQ2FyZEFmdGVyQ3JlYXRpb24iLCJuZXdFbGVtZW50IiwiZ2V0RWxlbWVudCIsImVkaXRVc2VyUHJvZmlsZVZhbGlkYXRvciIsImNsZWFyUHJvZmlsZUVycm9ycyIsInByb2ZpbGVEYXRhRnJvbVBhZ2UiLCJnZXRVc2VySW5mbyIsImVuYWJsZVZhbGlkYXRpb24iLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRQcm9maWxlSW5mbyIsInZhbHVlcyIsImluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIl0sIm1hcHBpbmdzIjoieUxBQU8sSUFBTUEsRUFBYixXQUNFLFdBQ0VDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEksNEZBQ0EsU0FDQUMsS0FBS0MsVUFBWVAsRUFDakJNLEtBQUtFLFdBQWFQLEVBQUtRLEtBQ3ZCSCxLQUFLSSxXQUFhVCxFQUFLVSxLQUN2QkwsS0FBS00sV0FBYVgsRUFBS1ksTUFDdkJQLEtBQUtRLFFBQVViLEVBQUtjLElBQ3BCVCxLQUFLVSxTQUFXZixFQUFLZ0IsTUFBTUYsSUFDM0JULEtBQUtZLGlCQUFtQmhCLEVBQ3hCSSxLQUFLYSxrQkFBb0JoQixFQUN6QkcsS0FBS2MsY0FBZ0JoQixFQUNyQkUsS0FBS2UsUUFBVWhCLEUsUUFsQm5CLE8sRUFBQSxHLEVBQUEsc0NBc0JJLE9BQU9pQixTQUFTQyxjQUFjakIsS0FBS0MsV0FBV2lCLFFBQVFDLFdBQVUsS0F0QnBFLHlDQXlCcUJDLEdBQ0NBLEVBQU1DLE9BQU9DLFdBQ3JCQyxXQTNCZCxzQ0E4QmtCLFdBQ2R2QixLQUFLd0IsU0FDRlAsY0FBYyxnQkFDZFEsaUJBQWlCLFNBQVMsU0FBQ0wsR0FDMUIsSUFBTU0sRUFBWU4sRUFBTUMsT0FBT0MsV0FDL0IsRUFBS1Qsa0JBQWtCYSxNQUczQjFCLEtBQUt3QixTQUNGUCxjQUFjLGdCQUNkUSxpQkFBaUIsU0FBUyxXQUN6QixFQUFLYixpQkFBaUIsRUFBS1YsV0FBWSxFQUFLRSxlQUdoREosS0FBS3dCLFNB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YXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGNhcmQsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVUcmFzaENsaWNrLFxyXG4gICAgYXBpUHJha3Rpa3VtLFxyXG4gICAgdXNlcklkXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2NhcmRpbWFnZSA9IGNhcmQubGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IGNhcmQubmFtZTtcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGNhcmQubGlrZXM7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkLl9pZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBjYXJkLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2sgPSBoYW5kbGVUcmFzaENsaWNrO1xyXG4gICAgdGhpcy5fYXBpUHJha3Rpa3VtID0gYXBpUHJha3Rpa3VtO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2RlbGV0ZUNhcmRIYW5kbGVyKGV2ZW50KSB7XHJcbiAgICBjb25zdCBjYXJkQ2hpbGQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgIGNhcmRDaGlsZC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9zZXRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZENoaWxkID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlVHJhc2hDbGljayhjYXJkQ2hpbGQpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkaW1hZ2UsIHRoaXMuX2NhcmRUaXRsZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgICBjb25zdCBsaWtlc0NvbnRhaW5lciA9IGV2dC50YXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgICBjb25zdCBpc0l0TnVsbCA9IGxpa2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZV9hY3RpdmVcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvdW50TGlrZXMgPSBsaWtlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NvdW50ZXItbGlrZVwiKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDb3VudExpa2VzKHRoaXMuX2NhcmRJZCwgY291bnRMaWtlcywgaXNJdE51bGwpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVDb3VudGVyTGlrZXMoY291bnRlckxpa2VzRWxlbWVudCwgY291bnRMaWtlc0Zyb21TZXJ2ZXIpIHtcclxuICAgIGNvdW50ZXJMaWtlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBjb3VudExpa2VzRnJvbVNlcnZlci5saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ291bnRMaWtlcyhjYXJkSUQsIGNvdW50ZXJMaWtlc0VsZW1lbnQsIGlzTGlrZWQpIHtcclxuICAgIGlmIChpc0xpa2VkID09IG51bGwpIHtcclxuICAgICAgY29uc3QgcHJvbWlzZURlbGV0ZUxpa2VzID0gdGhpcy5fYXBpUHJha3Rpa3VtLmRlbGV0ZUxpa2UoY2FyZElEKTtcclxuICAgICAgcHJvbWlzZURlbGV0ZUxpa2VzXHJcbiAgICAgICAgLnRoZW4oKGNvdW50TGlrZXNGcm9tU2VydmVyKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVDb3VudGVyTGlrZXMoY291bnRlckxpa2VzRWxlbWVudCwgY291bnRMaWtlc0Zyb21TZXJ2ZXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcHJvbWlzZUxpa2VzID0gdGhpcy5fYXBpUHJha3Rpa3VtLnB1dExpa2UoY2FyZElEKTtcclxuICAgICAgcHJvbWlzZUxpa2VzXHJcbiAgICAgICAgLnRoZW4oKGNvdW50TGlrZXNGcm9tU2VydmVyKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVDb3VudGVyTGlrZXMoY291bnRlckxpa2VzRWxlbWVudCwgY291bnRMaWtlc0Zyb21TZXJ2ZXIpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hpZGVUcmFzaEljb24oX293bmVySWQsIF91c2VySWQpIHtcclxuICAgIGNvbnN0IGNhcmRUcmFzaEljb24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2hcIik7XHJcblxyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICBjYXJkVHJhc2hJY29uLnNyYyA9IFwiXCI7XHJcbiAgICAgIGNhcmRUcmFzaEljb24uYWx0ID0gXCJcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oaWdobGlnaHRMaWtlcygpIHtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlcy5maW5kKChpdGVtKSA9PiB7XHJcbiAgICAgIGlmIChpdGVtLl9pZCA9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRFbGVtZW50KCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICBjb25zdCBjYXJkSUQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuICAgIGNhcmRJRC5pZCA9IHRoaXMuX2NhcmRJZDtcclxuICAgIGNvbnN0IGNhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjb3VudGVyTGlrZXNFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19jb3VudGVyLWxpa2VcIlxyXG4gICAgKTtcclxuXHJcbiAgICBjYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2NhcmRpbWFnZTtcclxuICAgIGNhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fY2FyZFRpdGxlO1xyXG4gICAgY291bnRlckxpa2VzRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmRMaWtlcy5sZW5ndGg7XHJcblxyXG4gICAgdGhpcy5faGlnaGxpZ2h0TGlrZXMoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmRUaXRsZTtcclxuXHJcbiAgICB0aGlzLl9oaWRlVHJhc2hJY29uKHRoaXMuX293bmVySWQsIHRoaXMuX3VzZXJJZCk7XHJcblxyXG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IsIG9iamVjdCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb2JqZWN0LmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IG9iamVjdC5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvYmplY3QuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9iamVjdC5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yID0gb2JqZWN0LmZvcm1Qcm9maWxlSW5wdXRzU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yID0gb2JqZWN0LmZvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3I7XHJcbiAgfVxyXG4gIFxyXG4gIC8qKiAg0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC00L7QsdCw0LLQu9GP0LXRgiDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5ICovXHJcbiAgX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29iamVjdC5lcnJvckNsYXNzKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vYmplY3QuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8qKiAg0KTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINGD0LTQsNC70Y/QtdGCINC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LkgKi9cclxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vYmplY3QuZXJyb3JDbGFzcyk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fb2JqZWN0LmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0RXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIC8qKiDQpNGD0L3QutGG0LjRjywg0LrQvtGC0L7RgNCw0Y8g0L/RgNC+0LLQtdGA0Y/QtdGCINCy0LDQu9C40LTQvdC+0YHRgtGMINC/0L7Qu9GPICovXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBpc0lucHV0Tm90VmFsaWQgPSAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG5cclxuICAgIGlmIChpc0lucHV0Tm90VmFsaWQpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZ2V0RXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIC8qKiAg0JXRgdC70Lgg0L/QvtC70LUg0L3QtSDQv9GA0L7RhdC+0LTQuNGCINCy0LDQu9C40LTQsNGG0LjRjiwg0L/QvtC60LDQttC10Lwg0L7RiNC40LHQutGDICovXHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvKiogINCV0YHQu9C4INC/0YDQvtGF0L7QtNC40YIsINGB0LrRgNC+0LXQvCAqL1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJblZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICBjb25zdCB2YWxpZCA9IGlucHV0TGlzdC5zb21lKFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIHZhbGlkO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGJ1dHRvbkVsZW1lbnQsIGludmFsaWQpIHtcclxuICAgIGlmIChpbnZhbGlkKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vYmplY3QuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcblxyXG4gICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29iamVjdC5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuXHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fb2JqZWN0LmlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX29iamVjdC5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICBjb25zdCBpbnZhbGlkID0gdGhpcy5faGFzSW5WYWxpZElucHV0KGlucHV0TGlzdCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uRWxlbWVudCwgaW52YWxpZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybUVsZW1lbnQsIHRoaXMuX29iamVjdCk7XHJcbiAgfVxyXG5cclxuICBjbGVhclByb2ZpbGVFcnJvcnMoKSB7XHJcbiAgICBjb25zdCBwb3B1cElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yKTtcclxuICAgIGNvbnN0IHBvcHVwU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBjb25zdCBwb3B1cElucHV0RXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1Qcm9maWxlSW5wdXRzRXJyb3JzU2VsZWN0b3IpO1xyXG4gICAgaWYgKHBvcHVwSW5wdXQubGVuZ3RoICE9PSAwKSB7XHJcbiAgICAgIHBvcHVwSW5wdXQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICB9KTtcclxuICAgICAgcG9wdXBTdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgaWYgKHBvcHVwSW5wdXRFcnJvci5sZW5ndGggIT09IDApIHtcclxuICAgICAgICBwb3B1cElucHV0RXJyb3IuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zLHVzZXJJZCkge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihjYXJkLHVzZXJJZCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCwgaXNBcnJheSkge1xyXG4gICAgaWYgKGlzQXJyYXkpIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF90eXBlX2VkaXQtdXNlci1wcm9maWxlXCIsXHJcbiAgZm9ybVNlbGVjdG9yQ2FyZDogXCIucG9wdXBfdHlwZV9uZXctY2FyZHNcIixcclxuICBmb3JtUHJvZmlsZUlucHV0c1NlbGVjdG9yIDogXCIucG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBmb3JtUHJvZmlsZUlucHV0c0Vycm9yc1NlbGVjdG9yOlwiLnBvcHVwX19pbnB1dC1lcnJvclwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0XCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0X2luYWN0aXZlXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsIFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IG92ZXJsYXkgPSBcIi5vdmVybGF5XCI7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRzU2VsZWN0b3IgPSBcIi5wb3B1cF90eXBlX25ldy1jYXJkc1wiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZVNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9pbWFnZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBUcmFzaFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9yZW1vdmluZ19jYXJkXCI7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBcIi5jYXJkLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VTZWxlY3RvciA9IChcIi5wcm9maWxlX19pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGVTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZWRpdC11c2VyLXByb2ZpbGVcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGVQaG90b1NlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9lZGl0aW5nX3Bob3RvX3Byb2ZpbGVcIjtcclxuZXhwb3J0IGNvbnN0IHBvcHVwT3BlblByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWUtZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZHNPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX192ZWN0b3JcIik7XHJcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XHJcbmV4cG9ydCBjb25zdCB0ZXh0UHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2l0ZW1fcHJvZmlsZV9uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faXRlbV9wcm9maWxlX2pvYlwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2NhcmRzX19zdWJtaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBob3RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waG90b19jb250YWluZXJcIik7XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvcixvdmVybGF5KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3ZlcmxheSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9vdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5X3Zpc2libGVcIik7XHJcbiAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICB0aGlzLl9vdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJvdmVybGF5X3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfSBcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+e1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKSkge1xyXG4gICBcclxuICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgIH0gIFxyXG4gICAgfSApO1xyXG4gICAgdGhpcy5fb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7IFxyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7IFxyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfSBcclxuICAgIH0pOyBcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Isb3ZlcmxheSl7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yLG92ZXJsYXkpXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlQmlnSW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uSW1hZ2VCaWdJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaW1hZ2VMaW5rLCBpbWFnZVRpdGxlKSB7XHJcbiAgICAvKiog0LLRi9C30YvQstCw0LXQvCDRgNC+0LTQuNGC0LXQu9GM0YHQutC40Lkg0LzQtdGC0L7QtCAqL1xyXG4gICAgc3VwZXIub3BlbigpOyBcclxuXHJcbiAgICAvKiog0LTQvtC/0L7Qu9C90LjQvCBvcGVuINC90L7QstC+0Lkg0YTRg9C90LrRhtC40L7QvdCw0LvRjNC90L7RgdGC0YzRjiAqL1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZUJpZ0ltYWdlRWxlbWVudC5hbHQgPSBpbWFnZVRpdGxlO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZUJpZ0ltYWdlRWxlbWVudC5zcmMgPSBpbWFnZUxpbms7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb25JbWFnZUJpZ0ltYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGltYWdlVGl0bGU7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLG92ZXJsYXksaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcixvdmVybGF5KTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgXHJcbiAgICBjb25zdCB2YWx1ZXNGcm9tSW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgICAgIFwiLnBvcHVwX19pbnB1dFwiXHJcbiAgICApO1xyXG5cclxuICAgIHZhbHVlc0Zyb21JbnB1dHMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbZWxlbWVudC5uYW1lXSA9IGVsZW1lbnQudmFsdWU7ICAgICAgXHJcbiAgICB9KTsgXHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfSBcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZXNldCgpOyAgIFxyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpe1xyXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0Jyk7XHJcbiAgICAgIGlmIChpc0xvYWRpbmcpe1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5pbm5lckhUTUwgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcclxuICAgICAgfSAgIFxyXG4gICB9O1xyXG5cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRGVsZXRlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIG92ZXJsYXksIGhhbmRsZUZvcm1XaXRoRGVsZXRlU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yLG92ZXJsYXkpO1xyXG4gICAgdGhpcy5oYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdCA9IGhhbmRsZUZvcm1XaXRoRGVsZXRlU3VibWl0O1xyXG4gIH1cclxuICAgIFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKGNhcmQpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmhhbmRsZUZvcm1XaXRoRGVsZXRlU3VibWl0KGNhcmQpO1xyXG4gICAgfSk7ICBcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVFbGVtZW50LCB1c2VyRGVzY3JpcHRpb25FbGVtZW50LHVzZXJBdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fc2VsZWN0b3JOYW1lID0gdXNlck5hbWVFbGVtZW50O1xyXG4gICAgdGhpcy5fc2VsZWN0b3JEZXNjcmlwdGlvbiA9IHVzZXJEZXNjcmlwdGlvbkVsZW1lbnQ7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9zZWxlY3Rvck5hbWUudGV4dENvbnRlbnQ7IFxyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLl9zZWxlY3RvckRlc2NyaXB0aW9uLnRleHRDb250ZW50OyBcclxuICAgICAgXHJcbiAgICAgY29uc3QgdXNlckRhdGEgPSB7XHJcbiAgICAgIHVzZXJOYW1lIDogbmFtZSxcclxuICAgICAgdXNlckRlc2NyaXB0aW9uIDogZGVzY3JpcHRpb24sXHJcbiAgICB9XHJcbiAgICBcclxuICByZXR1cm4gdXNlckRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9uKSB7XHJcbiAgICBjb25zdCBuYW1lSW5wdXRWYWx1ZSA9IHVzZXJOYW1lOyBcclxuICAgIGNvbnN0IGpvYklucHV0VmFsdWUgPSB1c2VyRGVzY3JpcHRpb247IFxyXG4gXHJcbiAgICB0aGlzLl9zZWxlY3Rvck5hbWUudGV4dENvbnRlbnQgPSBuYW1lSW5wdXRWYWx1ZTsgXHJcbiAgICB0aGlzLl9zZWxlY3RvckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gam9iSW5wdXRWYWx1ZTsgXHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpe1xyXG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IGRhdGE7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgXCIuL3N0eWxlLmNzc1wiO1xyXG5pbXBvcnQge0NhcmR9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHtGb3JtVmFsaWRhdG9yfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7U2VjdGlvbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQge3ZhbGlkYXRpb25Db25maWcsIG92ZXJsYXkscG9wdXBDYXJkc1NlbGVjdG9yLHBvcHVwSW1hZ2VTZWxlY3Rvcixwb3B1cFRyYXNoU2VsZWN0b3IsXHJcbiAgY2FyZFRlbXBsYXRlLCBwcm9maWxlSW1hZ2VTZWxlY3RvciwgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLHBvcHVwRWRpdFByb2ZpbGVQaG90b1NlbGVjdG9yLHBvcHVwT3BlblByb2ZpbGVCdXR0b24sXHJcbiAgcG9wdXBDYXJkc09wZW5CdXR0b24sY2FyZHNDb250YWluZXIsIHRleHRQcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLHByb2ZpbGVOYW1lSW5wdXQsXHJcbiAgcHJvZmlsZUpvYklucHV0LGFkZGluZ0luYWN0aXZlQ2xhc3NGb3JTdWJtaXQsIHByb2ZpbGVJbWFnZSxwcm9maWxlUGhvdG9Db250YWluZXJcclxufSBmcm9tIFwiLi4vc2NyaXB0cy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aERlbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhEZWxldGUuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG4vKiog0J7QsdGA0LDQsdC+0YLRh9C40LrQuCAgKi9cclxuZnVuY3Rpb24gaGFuZGxlVHJhc2hDbGljayhjYXJkKSB7XHJcbiAgdHJhc2hQb3B1cC5vcGVuKCk7XHJcbiAgdHJhc2hQb3B1cC5zZXRFdmVudExpc3RlbmVycyhjYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdFBob3RvUHJvZmlsZVN1Ym1pdChuZXdMaW5rKSB7XHJcbiAgcG9wdXBXaXRoRWRpdFBob3RvLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpUHJha3Rpa3VtLmNoYW5nZUF2YXRhcihuZXdMaW5rKVxyXG4gIC50aGVuKCgpPT57XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKG5ld0xpbmsuYXZhdGFyKTtcclxuICAgIHBvcHVwV2l0aEVkaXRQaG90by5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT57XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKT0+e1xyXG4gICAgcG9wdXBXaXRoRWRpdFBob3RvLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gIH0pXHJcbiAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KCkge1xyXG4gIFxyXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0ge1xyXG4gICAgbmFtZTogcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSxcclxuICAgIGFib3V0OiBwcm9maWxlSm9iSW5wdXQudmFsdWUsXHJcbiAgfTtcclxuICBwcm9maWxlUG9wVXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlQcmFrdGlrdW0uc2V0TmV3UHJvZmlsZShwcm9maWxlSW5mbylcclxuICAudGhlbigoKT0+e1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZU5hbWVJbnB1dCwgcHJvZmlsZUpvYklucHV0KTtcclxuICAgIHByb2ZpbGVQb3BVcC5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcik9PntcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpPT57XHJcbiAgICBwcm9maWxlUG9wVXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdChvYmplY3ROZXdDYXJkKSB7XHJcbiAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpUHJha3Rpa3VtLnBvc3RDYXJkT25UaGVTZXJ2ZXIob2JqZWN0TmV3Q2FyZClcclxuICAudGhlbigoZGF0YUNhcmRBZnRlckNyZWF0aW9uKT0+e1xyXG4gXHJcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhQ2FyZEFmdGVyQ3JlYXRpb24sZGF0YUNhcmRBZnRlckNyZWF0aW9uLm93bmVyLl9pZCk7XHJcbiAgICAgY2FyZHNMaXN0LmFkZEl0ZW0obmV3RWxlbWVudCk7XHJcbiAgXHJcbiAgICBhZGRpbmdJbmFjdGl2ZUNsYXNzRm9yU3VibWl0LmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgIHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzc1xyXG4gICAgKTtcclxuICBcclxuICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKT0+e1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCk9PntcclxuICAgIGFkZENhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdChjYXJkKXtcclxuICBhcGlQcmFrdGlrdW0uZGVsZXRlQ2FyZChjYXJkLmlkKVxyXG4gIC50aGVuKCgpPT4ge1xyXG4gICAgY2FyZC5yZW1vdmUoKTtcclxuICAgIHRyYXNoUG9wdXAuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KSBcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGxpbmssIG5hbWUpIHtcclxuICBpbWFnZVBvcHVwLm9wZW4obGluaywgbmFtZSk7XHJcbn1cclxuXHJcbi8qKiDQntCx0YrRj9Cy0LvQtdC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQvtCyINC60LvQsNGB0YHQvtCyKi9cclxuY29uc3QgYXBpUHJha3Rpa3VtID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTE3XCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIyYmUwZjE2OS01Yzg2LTQxODEtYjMwMy0zYjAwOWZlYmE0NjZcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcFVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLFxyXG4gIG92ZXJsYXksXHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmNvbnN0IHRyYXNoUG9wdXAgPSBuZXcgUG9wdXBXaXRoRGVsZXRlKHBvcHVwVHJhc2hTZWxlY3RvcixvdmVybGF5LCBoYW5kbGVGb3JtV2l0aERlbGV0ZVN1Ym1pdCApO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoRWRpdFBob3RvID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBFZGl0UHJvZmlsZVBob3RvU2VsZWN0b3IsXHJcbiAgb3ZlcmxheSxcclxuICBoYW5kbGVFZGl0UGhvdG9Qcm9maWxlU3VibWl0XHJcbik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICB0ZXh0UHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxyXG4gIHByb2ZpbGVJbWFnZVNlbGVjdG9yXHJcbik7XHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICByZW5kZXJlcjogKGNhcmQsdXNlcklkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmQsdXNlcklkKTtcclxuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oZWxlbWVudCx0cnVlKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYXJkc0NvbnRhaW5lclxyXG4pO1xyXG5cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBDYXJkc1NlbGVjdG9yLCBvdmVybGF5LCBoYW5kbGVGb3JtU3VibWl0KTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBJbWFnZVNlbGVjdG9yLCBvdmVybGF5KTtcclxuXHJcbi8qKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDRgdC70YPRiNCw0YLQtdC70LXQuSDQvdCwINGB0YLRgNCw0L3QuNGG0LUgKi9cclxucG9wdXBXaXRoRWRpdFBob3RvLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnByb2ZpbGVQb3BVcC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZVBob3RvQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgcG9wdXBXaXRoRWRpdFBob3RvLm9wZW4oKTtcclxufSk7XHJcblxyXG5wb3B1cE9wZW5Qcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgcHJvZmlsZVBvcFVwLm9wZW4oKTtcclxuICBlZGl0VXNlclByb2ZpbGVWYWxpZGF0b3IuY2xlYXJQcm9maWxlRXJyb3JzKCk7XHJcbiAgY29uc3QgcHJvZmlsZURhdGFGcm9tUGFnZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcblxyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlRGF0YUZyb21QYWdlLnVzZXJOYW1lO1xyXG4gIHByb2ZpbGVKb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVEYXRhRnJvbVBhZ2UudXNlckRlc2NyaXB0aW9uO1xyXG59KTtcclxuXHJcbnBvcHVwQ2FyZHNPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxuICBlZGl0VXNlclByb2ZpbGVWYWxpZGF0b3IuY2xlYXJQcm9maWxlRXJyb3JzKCk7XHJcbiAgYWRkaW5nSW5hY3RpdmVDbGFzc0ZvclN1Ym1pdC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgKTtcclxufSk7XHJcblxyXG5wcm9maWxlUGhvdG9Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwb3B1cFdpdGhFZGl0UGhvdG8ub3BlbigpO1xyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmQsdXNlcklkKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmRUZW1wbGF0ZSxcclxuICAgIGNhcmQsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVUcmFzaENsaWNrLFxyXG4gICAgYXBpUHJha3Rpa3VtLFxyXG4gICAgdXNlcklkXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgZWxlbWVudCA9IGNhcmRFbGVtZW50LmdldEVsZW1lbnQoKTtcclxuICByZXR1cm4gZWxlbWVudDtcclxufVxyXG4vKiog0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0Y3QutC30LXQvNC/0LvRj9GA0L7QsiDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INC40L3Qv9GD0YLQvtCyICAqL1xyXG5jb25zdCBlZGl0VXNlclByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcixcclxuICB2YWxpZGF0aW9uQ29uZmlnXHJcbik7XHJcblxyXG5lZGl0VXNlclByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcuZm9ybVNlbGVjdG9yQ2FyZCxcclxuICB2YWxpZGF0aW9uQ29uZmlnXHJcbik7XHJcbmFkZENhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLyoqINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC00LDQvdC90YvRhSDRgSDRgdC10YDQstC10YDQsCAqL1xyXG5Qcm9taXNlLmFsbChbIFxyXG4gIGFwaVByYWt0aWt1bS5nZXRJbml0aWFsQ2FyZHMoKSxcclxuICBhcGlQcmFrdGlrdW0uZ2V0UHJvZmlsZUluZm8oKVxyXG5dKVxyXG4udGhlbigodmFsdWVzKSA9PiB7XHJcbiAgY29uc3QgW2luaXRpYWxDYXJkcyxwcm9maWxlSW5mb10gPSB2YWx1ZXM7XHJcbiAgLy9jb25zb2xlLmxvZyhpbml0aWFsQ2FyZHMpO1xyXG4gIGNvbnN0IHVzZXJJZCA9IHByb2ZpbGVJbmZvLl9pZDtcclxuXHJcbiAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyx1c2VySWQpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHByb2ZpbGVJbmZvLm5hbWUscHJvZmlsZUluZm8uYWJvdXQpO1xyXG4gIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocHJvZmlsZUluZm8uYXZhdGFyKTtcclxufSlcclxuLmNhdGNoKChlcnIpID0+e1xyXG4gIGNvbnNvbGUubG9nKGVycik7XHJcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIC8qKiDRgtC10LvQviDQutC+0L3RgdGC0YDRg9C60YLQvtGA0LAqL1xyXG4gICAgdGhpcy5iYXNlVXJsID0gY29uZmlnLmJhc2VVcmw7XHJcbiAgICB0aGlzLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9nZXRSZXNwb25zZURhdGEodmFsdWUpe1xyXG4gICAgaWYgKHZhbHVlLm9rKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS5qc29uKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7dmFsdWUuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gICAgc2V0TmV3UHJvZmlsZShwcm9maWxlSW5mbykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHByb2ZpbGVJbmZvKSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgfVxyXG5cclxuICBwb3N0Q2FyZE9uVGhlU2VydmVyKG5ld0NhcmQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG5ld0NhcmQpLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGNoYW5nZUF2YXRhcihsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGxpbmspLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElEKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHB1dExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9